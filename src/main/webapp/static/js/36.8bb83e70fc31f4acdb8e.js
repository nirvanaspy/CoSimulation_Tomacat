webpackJsonp([36],{"+WHg":function(n,e,t){var i=t("1V3p");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("c281740e",i,!0)},"1V3p":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},Tl1N:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("mvHQ"),o=t.n(i),a=t("//Fk"),l=t.n(a),s=t("I1uT"),r=t("GLLG"),d=t("vLgD"),c=t("aprE"),p=t("JSQk"),f=t.n(p),u=t("pxDI"),m=t("mw3O"),h=t.n(m),g={name:"comFileManage",props:{selectCompId:{type:String},selectCompName:{type:String}},components:{maniFile:c.default},data:function(){return{ip:"",port:"",userId:"",projectId:"",componentId:"",compName:"",parentNodeId:"",newFolderName:"",selectFileId:"",errorMessage:"操作失败",maniType:"",fileRename:{name:""},fileEditInfo:{secretClass:null,type:null,codeName:null},uploadDialog:!1,uploadFolderDialog:!1,renameDialog:!1,maniFileDialog:!1,editInfoDialog:!1,fileList:[],breadcrumbList:[],tableKey:0,list:[],singleComp:null,total:null,listLoading:!0,uploading:!1,upFileLoading:!1,upFolderLoading:!1,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",deviceName:void 0},sortable:null,oldList:[],newList:[],fileRenameRules:{name:[{required:!0,message:"请输入文件名！",trigger:"blur"}]},downloadLoading:!1,maniFileLoading:!1,options:{target:"http://127.0.0.1:8080/files/chunks",headers:{Authorization:""},chunkSize:83886080,simultaneousUploads:20,autoStart:!1,testChunks:!0},attrs:{accept:"image/*"},statusText:{success:"上传结束",error:"出错了",uploading:"上传中",paused:"暂停中",waiting:"等待中"},fileTreeList:[],md5Loading:!1,started:!1,autoStart:!1,fileInfo:[],folderInfo:[],files:[],folderClearData:[],fileClearData:[],fileAll:[],searchQuery:"",CheckedComps:[],target:"",token:"",folderFileInfo:[],fileInfoList:[],fileCompleteLength:0,folderfileCompleteLength:0,stopResolveMD5:!1,hiddenClose:!1}},created:function(){this.initData(),this.ip=this.getCookie("ip"),this.port=this.getCookie("port"),this.userId=this.getCookie("userId"),this.target=d.a.defaults.baseURL+"/files/chunks",this.token="Bearer"+this.$store.getters.token,this.selectFileId="",this.maniType=""},methods:{processResponse:function(){console.log(arguments,"processResponse")},initData:function(){this.projectId=this.$store.getters.projectId,this.componentId=this.selectCompId,this.compName=this.selectCompName,this.breadcrumbList=[],this.list=[],this.breadcrumbList.push({name:this.compName,componentId:this.componentId,parentNodeId:"",folder:!0}),this.componentId?this.getList():this.listLoading=!1,this.autoStart=!1},getList:function(){var n=this;this.listLoading=!0,Object(r.s)(this.componentId,this.parentNodeId).then(function(e){n.list=e.data.data,n.listLoading=!1}).catch(function(){n.listLoading=!1,n.$notify({title:"失败",message:"加载出错！",type:"error",duration:2e3})})},loadListFile:function(n){var e=this;n.folder&&(this.parentNodeId=n.id,this.listLoading=!0,Object(s.e)(this.componentId,this.parentNodeId).then(function(t){e.listLoading=!1,e.list=t.data.data,e.breadcrumbList.push({name:n.name,componentId:e.componentId,parentNodeId:n.id,folder:!0})}).catch(function(){e.listLoading=!1,e.$notify({title:"失败",message:"加载出错！",type:"error",duration:2e3})}))},addFolder:function(){if(0===this.list.length){this.list.splice(0,0,{name:"",newFolder:!0,folder:!0})}else if(""!=this.list[0].name){this.list.splice(0,0,{name:"",newFolder:!0,folder:!0})}},newFoler:function(){var n=this;if(this.newFolderName){this.list.splice(0,1);var e=new FormData;e.append("name",this.newFolderName),Object(s.l)(this.componentId,this.parentNodeId,e).then(function(){n.newFolderName="",n.getList()}).catch(function(){n.newFolderName="",n.$notify({title:"失败",message:"新建失败",type:"error",duration:2e3})})}},cancelNewFolder:function(){this.list[0].id||(this.list.splice(0,1),this.newFolderName="")},handleuploadFile:function(){var n=this;this.uploadDialog=!0,this.hiddenClose=!1,this.$nextTick(function(){n.fileReader=new FileReader,n.$refs.uploader.uploader.cancel(),n.$refs.uploader.uploader.opts.target=n.target,n.$refs.uploader.uploader.opts.headers.Authorization=n.token,$(".uploader-list ul").html(""),n.fileCompleteLength=0,n.fileInfoList=[],$(".manage-uploader .uploader-btn").css("display","inline-block")})},handleUploadFolder:function(){var n=this;this.hiddenClose=!1,this.uploadFolderDialog=!0,this.$nextTick(function(){n.fileReader=new FileReader,n.$refs.uploaderFolder.uploader.cancel(),n.$refs.uploaderFolder.uploader.opts.target=n.target,n.$refs.uploaderFolder.uploader.opts.headers.Authorization=n.token,n.folderFileInfo=[],$(".manage-uploaderFolder .uploader-btn").css("display","inline-block")})},checkMd5:function(n,e){var t=this;this.hiddenClose=!0,this.md5Loading=!0,$(".manage-uploader .uploader-btn").css("display","none"),this.fileCompleteLength+=n.length;for(var i=this.$refs.uploader.uploader.opts.chunkSize,o=0,a=this,l=function(){var e=n[s];t.resolveMd5(e,i).then(function(t){console.log(t),e.md5=t,e.uniqueIdentifier=t,Object(u.a)(e.md5).then(function(t){if(t.data.data.id){o++;var i={fileId:t.data.data.id,MD5:e.md5,name:e.name,relativePath:"/"+e.relativePath};a.fileInfoList.push(i);var l="",s=e.size;s<1024?l=s+" B":s>=1024&&s<1048576?l=Math.round(s/1024*10)/10+" KB":s>=1048576&&s<1073741824?l=Math.round(s/1048576*10)/10+" MB":s>=1073741824&&(l=Math.round(s/1073741824*10)/10+" G"),$(".manage-uploader .uploader-list ul").prepend('<div status="success" class="uploader-file"><div class="uploader-file-progress" style="transform: translateX(0%);"></div> <div class="uploader-file-info"><div class="uploader-file-name"><i icon="unknown" class="uploader-file-icon"></i>'+e.name+'</div> <div class="uploader-file-size">'+l+'</div> <div class="uploader-file-meta"></div> <div class="uploader-file-status"><span>成功了</span> <span style="display: none;"><span>100%</span> <em>0 bytes / s</em> <i></i></span></div> <div class="uploader-file-actions"><span class="uploader-file-pause"></span> <span class="uploader-file-resume">️</span> <span class="uploader-file-retry"></span> <span class="uploader-file-remove"></span></div></div></div>'),a.$refs.uploader.uploader.removeFile(e),a.fileCompleteLength+=1,a.listLoading=!1,o===n.length&&(a.md5Loading=!1,a.$refs.uploader.uploader.upload())}else 0==t.data.data&&++o===n.length&&(a.md5Loading=!1,a.$refs.uploader.uploader.upload())})})},s=0;s<n.length;s++)l()},resolveMd5:function(n,e){return new l.a(function(t,i){var o=n.file;if(n.md5)t(n.md5);else{var a=new f.a,l=new FileReader,s=(File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,Math.ceil(o.size/e)),r=0;l.onload=function(n){if(a.appendBinary(n.target.result),r++,console.log(r),r<s){var e="deal with"+r+"剩余"+(s-r);console.log(e),d()}else t(a.end());l.onerror=function(n){return i(n)}};var d=function(){var n=r*e,t=n+e>=o.size?o.size:n+e;l.readAsBinaryString(o.slice(n,t))};d()}})},fileRemove:function(){this.fileCompleteLength-=1},mergeFile:function(n,e,i,o,a){var l=this,s={identifier:n,totalChunks:e,totalSize:i,filename:o,relativePath:a},r=t("mw3O").stringify(s);Object(u.b)(r).then(function(){}).catch(function(){l.$notify({})})},fileSuccess:function(){var n=arguments,e=this;console.log("fileSuccess",arguments);var t={identifier:arguments[1].uniqueIdentifier,totalChunks:arguments[1].chunks.length,totalSize:arguments[1].size,filename:arguments[1].name,relativePath:arguments[1].relativePath},i=h.a.stringify(t);this.listLoading=!0,Object(u.b)(i).then(function(t){var i={fileId:t.data.data.id,MD5:n[1].md5,name:n[1].name,relativePath:"/"+n[1].relativePath};e.fileInfoList.push(i)})},fileComplete:function(){console.log("filecomplete=======")},complete:function(){},folderAdded:function(n,e){var t=this;$(".manage-uploaderFolder .uploader-btn").css("display","none");var i=n.length;this.folderfileCompleteLength=n.length,this.md5Loading=!0,this.hiddenClose=!0;for(var o=this.$refs.uploaderFolder.uploader.opts.chunkSize,a=0,l=this,s=function(){var e=n[r];t.resolveMd5(e,o).then(function(t){e.md5=t,e.uniqueIdentifier=t,Object(u.a)(e.md5).then(function(t){if(t.data.data.id){a++;var o={fileId:t.data.data.id,MD5:e.md5,name:e.name,relativePath:"/"+e.relativePath};l.listLoading=!1,l.folderFileInfo.push(o),l.$refs.uploaderFolder.uploader.removeFile(e),console.log(n.length),a===i&&(l.md5Loading=!1,l.$refs.uploaderFolder.uploader.upload())}else!1===t.data.data&&++a===i&&(l.md5Loading=!1,console.log(n.length),l.$refs.uploaderFolder.uploader.upload())})})},r=0;r<n.length;r++)s()},folderFileSuccess:function(){var n=arguments,e=this,t={identifier:arguments[1].uniqueIdentifier,totalChunks:arguments[1].chunks.length,totalSize:arguments[1].size,filename:arguments[1].name,relativePath:arguments[1].relativePath},i=h.a.stringify(t);this.listLoading=!0,Object(u.b)(i).then(function(t){var i={fileId:t.data.data.id,MD5:n[1].md5,name:n[1].name,relativePath:"/"+n[1].relativePath};e.folderFileInfo.push(i)})},folderComplete:function(){var n=this;console.log(arguments);var e=o()(this.folderFileInfo),t="文件"+arguments[1].name+"上传成功！";Object(u.d)(this.componentId,this.parentNodeId,e).then(function(){n.listLoading=!1,n.$notify({title:"成功",message:t,type:"success",duration:2e3}),n.getList()})},uploadFile:function(){var n=this;this.listLoading=!0,this.uploading=!0,this.upFileLoading=!0;var e=new FormData;e.append("parentnodeid",this.parentNodeId),this.fileAll=this.$refs.uploader.uploader.files;for(var t=0;t<this.fileAll.length;t++)e.append("files",this.fileAll[t].file);Object(s.k)(this.componentId,e).then(function(e){n.uploading=!1,n.upFileLoading=!1,n.$refs.uploader.uploader.cancel(),n.getList(),n.listLoading=!1,n.uploadDialog=!1}).catch(function(e){n.listLoading=!1,n.uploading=!1,n.upFileLoading=!1,n.$notify({title:"失败",message:"上传失败",type:"error",duration:2e3})})},upload_Folder:function(){var n=this;this.listLoading=!0,this.uploading=!0,this.upFolderLoading=!0;var e=new FormData;e.append("parentnodeid",this.parentNodeId),this.fileAll=this.$refs.uploaderFolder.uploader.files;for(var t=0;t<this.fileAll.length;t++)e.append("files",this.fileAll[t].file);Object(s.m)(this.componentId,e).then(function(){n.$refs.uploaderFolder.uploader.cancel(),n.upFolderLoading=!1,n.getList(),n.listLoading=!1,n.uploading=!1,n.uploadFolderDialog=!1}).catch(function(e){n.listLoading=!1,n.uploading=!1,n.upFolderLoading=!1,n.uploadFolderDialog=!1,n.$notify({title:"失败",message:"上传失败",type:"error",duration:2e3})})},deleteFile:function(n){var e=this;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.listLoading=!0,Object(s.d)(n.id).then(function(t){e.listLoading=!1,e.getList(),e.$notify({title:"成功",message:n.name+"删除成功",type:"success",duration:2e3})}).catch(function(){e.listLoading=!1,e.$notify({title:"失败",message:"删除失败",type:"error",duration:2e3})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},switchFolder:function(n,e){var t=this;n.folder&&(this.listLoading=!0,this.parentNodeId=n.parentNodeId,Object(s.e)(this.componentId,this.parentNodeId).then(function(n){t.listLoading=!1,t.list=n.data.data,t.breadcrumbList.splice(e+1,t.breadcrumbList.length-e-1)}).catch(function(){t.listLoading=!1}))},exportFile:function(n){var e=d.a.defaults.baseURL+"/proDesignLinkFiles/"+n.id+"/user/"+this.userId+"/export";window.open(e)},handleMove:function(n){var e=this;this.maniFileDialog=!0,this.maniFileLoading=!0,Object(s.e)(this.componentId,"").then(function(n){e.maniFileLoading=!1,e.$refs.maniFile.list=n.data.data,e.resetManiFile()}).catch(function(){e.maniFileLoading=!1,e.maniFileDialog=!1,e.$notify({title:"失败",message:"加载出错！",type:"error",duration:2e3})}),this.selectFileId=n.id,this.maniType="move"},handleCopy:function(n){var e=this;this.maniFileDialog=!0,this.maniFileLoading=!0,Object(s.e)(this.componentId,"").then(function(n){e.maniFileLoading=!1,e.$refs.maniFile.list=n.data.data,e.resetManiFile()}).catch(function(){e.maniFileLoading=!1,e.maniFileDialog=!1,e.$notify({title:"失败",message:"加载出错！",type:"error",duration:2e3})}),this.selectFileId=n.id,this.maniType="copy"},resetManiFile:function(){this.$refs.maniFile.breadcrumbList=[],this.$refs.maniFile.projectId=this.$store.getters.projectId,this.$refs.maniFile.componentId=this.selectCompId,this.$refs.maniFile.compName=this.selectCompName,this.$refs.maniFile.targetFolderId=this.componentId,this.$refs.maniFile.targetComponentId=this.componentId,this.$refs.maniFile.breadcrumbList.push({name:this.selectCompName,componentId:this.selectCompId,parentNodeId:"",folder:!0})},handleRenameFile:function(n){var e=this;this.renameDialog=!0,this.fileRename={name:n.name},this.selectFileId=n.id,this.$nextTick(function(){e.$refs.fileRenameForm.clearValidate()})},renameFile:function(){var n=this;this.$refs.fileRenameForm.validate(function(e){if(e){var i={name:n.fileRename.name},o=t("mw3O").stringify(i);Object(s.j)(n.selectFileId,o).then(function(){n.fileRename.name="",n.renameDialog=!1,n.$notify({title:"成功",message:"文件重命名成功！",type:"success",duration:2e3}),n.getList()}).catch(function(e){n.fileRename.name="",n.errorMessage="重命名失败！",e.response.data.message&&(n.errorMessage=e.response.data.message),n.$notify({title:"失败",message:n.errorMessage,type:"error",duration:2e3})})}})},maniFile:function(){var n=this;if(""!==this.$refs.maniFile.targetComponentId){var e={targetNodeId:this.$refs.maniFile.targetFolderId,targetComponentId:this.$refs.maniFile.targetComponentId},i=t("mw3O").stringify(e);"move"==this.maniType?Object(s.g)(this.$refs.maniFile.selectFileId,this.$refs.maniFile.targetFolderId,i).then(function(){n.maniFileDialog=!1,n.$notify({title:"成功",message:"文件移动成功！",type:"success",duration:2e3}),n.getList()}).catch(function(){n.maniFileDialog=!1,n.$notify({title:"失败",message:"文件移动失败！",type:"error",duration:2e3})}):"copy"==this.maniType&&Object(s.c)(this.$refs.maniFile.selectFileId,this.$refs.maniFile.targetFolderId,i).then(function(){n.maniFileDialog=!1,n.$notify({title:"成功",message:"文件移动成功！",type:"success",duration:2e3}),n.getList()}).catch(function(){n.maniFileDialog=!1,n.$notify({title:"失败",message:"文件复制失败！",type:"error",duration:2e3})})}else this.$message({type:"warning",message:"请先选择目标组件！"})},handleEditInfo:function(n){this.editInfoDialog=!0,this.selectFileId=n.id,this.fileEditInfo={secretClass:n.secretClass,type:n.type,codeName:n.codeName}},editFileInfo:function(){var n=this,e={secretClass:this.fileEditInfo.secretClass,type:this.fileEditInfo.type,codeName:this.fileEditInfo.codeName},i=t("mw3O").stringify(e);Object(r.h)(this.selectFileId,i).then(function(e){0===e.data.code?n.$notify({title:"成功",message:"文件信息修改成功！",type:"success",duration:2e3}):n.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})})}},computed:{classifyIcon:function(){return function(n){return 1==n.folder?"folder":"png"===n.files.type||"jpg"===n.files.type||"gif"===n.files.type?"image":"rar"===n.files.type||"zip"===n.files.type?"compressed":"file"}},computedSize:function(){return function(n){var e=void 0;return n<1024?e=n+"B":n>=1024&&n<1048576?e=Math.round(n/1024*10)/10+"KB":n>=1048576&&n<1073741824?e=Math.round(n/1048576*10)/10+"MB":n>=1073741824&&(e=Math.round(n/1073741824*10)/10+"G"),e}},computedSecret:function(){return function(n){return 0===n?"公开":1===n?"内部":2===n?"秘密":3===n?"机密":4===n?"绝密":void 0}},fileInfoListLength:function(){return this.fileInfoList.length},folderFileLength:function(){return this.folderFileInfo.length}},watch:{selectCompId:function(n,e){this.componentId=this.selectCompId,this.parentNodeId="",this.componentId&&this.initData()},selectCompName:function(n,e){this.componentId=this.selectCompId,this.parentNodeId="",this.componentId&&this.initData()},fileInfoListLength:function(n,e){var t=this;if(this.fileCompleteLength===this.fileInfoList.length&&0!==this.fileInfoList.length){var i=o()(this.fileInfoList);this.statusText.success="正在合并文件",Object(u.d)(this.componentId,this.parentNodeId,i).then(function(){t.listLoading=!1,t.hiddenClose=!1,t.$notify({title:"成功",message:"上传成功",type:"success",duration:2e3}),t.statusText.success="文件合并成功",t.getList()}).catch(function(){t.listLoading=!1,t.hiddenClose=!1,t.$notify({title:"失败",message:"文件上传时出错",type:"error",duration:2e3}),t.statusText.success="文件合并失败",t.getList()})}},folderFileLength:function(n,e){var t=this;if(this.folderfileCompleteLength===this.folderFileInfo.length&&0!==this.folderFileInfo.length){var i=o()(this.folderFileInfo);this.statusText.success="正在合并文件",Object(u.d)(this.componentId,this.parentNodeId,i).then(function(){t.listLoading=!1,t.hiddenClose=!1,t.$notify({title:"成功",message:"上传成功",type:"success",duration:2e3}),t.statusText.success="文件合并成功",t.getList()}).catch(function(){t.listLoading=!1,t.hiddenClose=!1,t.$notify({title:"失败",message:"文件上传时出错",type:"error",duration:2e3}),t.statusText.success="文件合并失败",t.getList()})}}}},v={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"fileComp"},[t("div",{staticClass:"operationContainer",staticStyle:{height:"40px","border-bottom":"1px solid #ebeef5"}},[t("div",{staticStyle:{float:"left","padding-left":"10px"}},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},n._l(n.breadcrumbList,function(e,i){return t("el-breadcrumb-item",{key:i},[t("span",{staticStyle:{cursor:"pointer",color:"rgb(0, 171, 235)"},on:{click:function(t){n.switchFolder(e,i)}}},[n._v(n._s(e.name))])])}))],1),n._v(" "),t("div",{staticStyle:{float:"right",color:"rgb(0, 171, 235)",cursor:"pointer","padding-right":"20px"}},[t("span",{staticStyle:{"margin-right":"18px"},on:{click:n.addFolder}},[t("svg-icon",{attrs:{"icon-class":"add"}}),n._v(" "),t("span",{staticStyle:{"font-size":"14px","margin-left":"6px"}},[n._v("新建文件夹")])],1),n._v(" "),t("span",{on:{click:n.handleuploadFile}},[t("svg-icon",{attrs:{"icon-class":"upload1"}}),n._v(" "),t("span",{staticStyle:{"font-size":"14px","margin-left":"6px"}},[n._v("上传文件")])],1),n._v(" "),t("span",[t("el-dropdown",{attrs:{trigger:"click"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"更多操作",placement:"top"}},[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"rgb(0, 171, 235)"}})])]),n._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("span",{staticStyle:{display:"inline-block",padding:"0 10px"},on:{click:function(e){n.handleUploadFolder()}}},[n._v("上传文件夹")])])],1)],1)],1)])]),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}],key:n.tableKey,staticClass:"fileList",staticStyle:{width:"100%"},attrs:{data:n.list,"element-loading-text":"正在加载组件文件",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"文件名","min-width":"200"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[t("svg-icon",{staticStyle:{"font-size":"30px","margin-right":"10px",cursor:"pointer",color:"#26bada"},attrs:{"icon-class":n.classifyIcon(e.row)}}),n._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.name,placement:"top"}},[e.row.newFolder?n._e():t("span",{staticClass:"link-type",staticStyle:{position:"relative",top:"2px",display:"inline-block",width:"70%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},on:{click:function(t){n.loadListFile(e.row)}}},[n._v("\n              "+n._s(e.row.name)+"\n            ")])]),n._v(" "),e.row.newFolder?t("span",[t("el-input",{ref:"newFolderInput",staticStyle:{width:"70%",display:"inline-block",position:"relative",top:"-2px"},attrs:{autofocus:"autofocus",placeholder:"按enter确定"},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.newFoler(e)}},model:{value:n.newFolderName,callback:function(e){n.newFolderName=e},expression:"newFolderName"}})],1):n._e()],1)]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"种类",width:"100"},scopedSlots:n._u([{key:"default",fn:function(e){return[!0===e.row.folder||e.row.newFolder?n._e():t("span",[n._v("\n          "+n._s(e.row.files.postfix)+"\n        ")]),n._v(" "),1!=e.row.folder||e.row.newFolder?n._e():t("span",[n._v("\n          文件夹\n        ")])]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"120",label:n.$t("table.compSize")},scopedSlots:n._u([{key:"default",fn:function(e){return[!0!==e.row.folder?t("span",[n._v(n._s(n.computedSize(e.row.files.fileSize)))]):n._e(),n._v(" "),!0===e.row.folder&&e.row.name?t("span",[n._v("--")]):n._e(),n._v(" "),e.row.newFolder?t("span",{staticStyle:{cursor:"pointer"},on:{click:n.cancelNewFolder}},[t("svg-icon",{attrs:{"icon-class":"cancel"}})],1):n._e()]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"120",label:"密级"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(n.computedSecret(e.row.secretClass)))])]}}])}),n._v(" "),t("el-table-column",{attrs:{"min-width":"150px",label:"创建时间"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("span",[n._v(n._s(e.row.createTime))])]}}])}),n._v(" "),t("el-table-column",{attrs:{width:"40px"},scopedSlots:n._u([{key:"default",fn:function(e){return[e.row.name?t("el-dropdown",{attrs:{trigger:"click"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"更多操作",placement:"top"}},[t("span",{staticClass:"el-dropdown-link"},[t("svg-icon",{attrs:{"icon-class":"ellipsis"}})],1)]),n._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("span",{staticStyle:{display:"inline-block",padding:"0 10px"},on:{click:function(t){n.deleteFile(e.row)}}},[n._v("删除")])]),n._v(" "),t("el-dropdown-item",{attrs:{divided:""}},[t("span",{staticStyle:{display:"inline-block",padding:"0 10px"},on:{click:function(t){n.exportFile(e.row)}}},[n._v("下载")])]),n._v(" "),t("el-dropdown-item",{attrs:{divided:""}},[t("span",{staticStyle:{display:"inline-block",padding:"0 10px"},on:{click:function(t){n.handleEditInfo(e.row)}}},[n._v("修改文件信息")])])],1)],1):n._e()]}}])})],1),n._v(" "),t("el-dialog",{staticClass:"uploadDialog",attrs:{title:"上传文件",visible:n.uploadDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":"",width:"50%"},on:{"update:visible":function(e){n.uploadDialog=e}}},[t("uploader",{directives:[{name:"loading",rawName:"v-loading",value:n.md5Loading,expression:"md5Loading"}],ref:"uploader",staticClass:"manage-uploader",attrs:{options:n.options,autoStart:n.autoStart,"file-status-text":n.statusText,"element-loading-text":"正在校验文件身份，请勿关闭"},on:{"file-complete":n.fileComplete,complete:n.complete,"files-added":n.checkMd5,"file-success":n.fileSuccess,"file-removed":n.fileRemove}},[t("uploader-unsupport"),n._v(" "),t("uploader-drop",[t("p",[n._v("拖拽文件到此处或")]),n._v(" "),t("uploader-btn",[n._v("选择文件")])],1),n._v(" "),t("uploader-list",{ref:"uploaderList"})],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n.hiddenClose?n._e():t("el-button",{on:{click:function(e){n.uploadDialog=!1}}},[n._v("关 闭")])],1)],1),n._v(" "),t("el-dialog",{staticClass:"uploadDialog",attrs:{title:"上传文件夹",visible:n.uploadFolderDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":"",width:"50%"},on:{"update:visible":function(e){n.uploadFolderDialog=e}}},[t("uploader",{directives:[{name:"loading",rawName:"v-loading",value:n.md5Loading,expression:"md5Loading"}],ref:"uploaderFolder",staticClass:"manage-uploaderFolder",attrs:{options:n.options,autoStart:n.autoStart,"file-status-text":n.statusText,started:n.started,"element-loading-text":"正在校验文件夹身份，请勿关闭"},on:{"files-added":n.folderAdded,"file-success":n.folderFileSuccess}},[t("uploader-unsupport"),n._v(" "),t("uploader-drop",[t("p",[n._v("拖拽文件到此处或")]),n._v(" "),t("uploader-btn",{attrs:{directory:!0}},[n._v("选择文件夹")])],1),n._v(" "),t("uploader-list",{ref:"uploaderFolderList"})],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n.hiddenClose?n._e():t("el-button",{on:{click:function(e){n.uploadFolderDialog=!1}}},[n._v("关 闭")])],1)],1),n._v(" "),t("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:n.maniFileLoading,expression:"maniFileLoading"}],staticClass:"maniFileDialog",attrs:{title:"文件管理",visible:n.maniFileDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){n.maniFileDialog=e}}},[t("div",[t("maniFile",{ref:"maniFile",attrs:{selectCompId:n.selectCompId,selectCompName:n.selectCompName,maniType:n.maniType,selectFileId:n.selectFileId}})],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.maniFileDialog=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:n.maniFile}},[n._v("确 定")])],1)]),n._v(" "),t("el-dialog",{staticClass:"maniFileDialog",attrs:{title:"文件重命名",visible:n.renameDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){n.renameDialog=e}}},[t("el-form",{ref:"fileRenameForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:n.fileRenameRules,model:n.fileRename,"label-position":"right","label-width":"70px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{model:{value:n.fileRename.name,callback:function(e){n.$set(n.fileRename,"name",e)},expression:"fileRename.name"}})],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.renameDialog=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:n.renameFile}},[n._v("确 定")])],1)],1),n._v(" "),t("el-dialog",{staticClass:"maniFileDialog",attrs:{title:"文件重命名",visible:n.editInfoDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){n.editInfoDialog=e}}},[t("el-form",{ref:"fileRenameForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{model:n.fileEditInfo,"label-position":"right","label-width":"70px"}},[t("el-form-item",{attrs:{label:"密级"}},[t("el-input",{model:{value:n.fileEditInfo.secretClass,callback:function(e){n.$set(n.fileEditInfo,"secretClass",e)},expression:"fileEditInfo.secretClass"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"类型"}},[t("el-input",{model:{value:n.fileEditInfo.type,callback:function(e){n.$set(n.fileEditInfo,"type",e)},expression:"fileEditInfo.type"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"代号"}},[t("el-input",{model:{value:n.fileEditInfo.codeName,callback:function(e){n.$set(n.fileEditInfo,"codeName",e)},expression:"fileEditInfo.codeName"}})],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.editInfoDialog=!1}}},[n._v("取 消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:n.editFileInfo}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var F=t("VU/8")(g,v,!1,function(n){t("+WHg")},"data-v-e198fba2",null);e.default=F.exports}});