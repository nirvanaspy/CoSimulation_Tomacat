webpackJsonp([15,78],{"/1Rw":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.mydialogFooter[data-v-09802af0] {\n  height:40px;\n}\n",""])},"5sW+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),o=i("vLgD");function r(e,t){return Object(o.a)({url:"/devices",method:"get",params:{size:t.size,page:t.page,deleted:!1}})}function n(e){return Object(o.a)({url:"/devices/"+e+"/clean",method:"delete"})}var l=i("cAgV"),d=i("0tEf"),c=i.n(d),u=i("O3w4"),p=i.n(u),h=i("9nW3"),m=i("7+uW"),f={name:"add-device",directives:{waves:l.a},components:{lineMarker:h.default},data:function(){return{isHistory:!1,tableKey:0,list:[],webResBody:[],checkedProcess:[],processIds:[],cpuData:0,ramData:0,upSpeed:0,countTime:null,listLoading:!0,currentDeviceIndex:0,searchQuery:"",reportData:{name:"",hostAddress:"",deployPath:""},proId:"",deviceId:"",listQuery:{page:0,size:20,limit:5,tagname:""},total:null,pagesize:10,currentPage:1,sortable:null,oldList:[],newList:[],temp:{name:"",hostAddress:"",deployPath:"",description:""},bookingTemp:{reportPath:"",bookingTime:1},disks:[],taskprocess:[],dialogFormVisible:!1,diskDialogVisible:!1,processDialogVisible:!1,compProcessDialogVisible:!1,reportDialogVisible:!1,creDevLoading:!1,upDevLoading:!1,delLoading:!1,dialogStatus:"",textMap:{update:"编辑",create:"新建"},dialogPvVisible:!1,pvData:[],deviceRules:{name:[{required:!0,message:"请输入设备名",trigger:"blur"}],hostAddress:[{required:!0,trigger:"blur",validator:function(e,t,i){var a=t.match(/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/);0==t.length?i(new Error("请输入IP！")):null==a?i(new Error("IP地址不合法！")):i()}}],deployPath:[{required:!0,trigger:"blur",validator:function(e,t,i){0==t.length?i(new Error("请输入路径！")):t.match(/^([a-zA-Z]:(\\))([a-zA-Z]*)|(\/([a-zA-Z]+))*$/)?i():i(new Error("路径格式不正确!"))}}]},bookingRules:{reportPath:[{required:!0,message:"请填写部署路径",trigger:"blur"}]},downloadLoading:!1,errorMessage:"操作失败！",currentTaskId:"",userId:"",bookingInfoDialog:!1,bookingInfo:{}}},filters:{statusFilter:function(e){return{true:"在线",false:"离线"}[e]}},created:function(){this.currentTaskId=this.$route.params.id,this.userId=this.getCookie("userId"),this.isHistory=!1,this.proId=this.getCookie("projectId"),this.getListAndSubscribe()},methods:{getList:function(){var e=this;this.listLoading=!0,r(this.proId,this.listQuery).then(function(t){if(0===t.data.code){e.isHistory=!1,e.list=t.data.data,e.listLoading=!1;for(var i=0;i<e.list.length;i++)e.list[i].online=!1,e.list[i].virtual=!1}})},getListAndSubscribe:function(){var e=this;this.listLoading=!0,r(this.proId,this.listQuery).then(function(t){if(0===t.data.code){e.isHistory=!1,e.list=t.data.data,e.listLoading=!1;for(var i=0;i<e.list.length;i++)e.list[i].online=!1,e.list[i].virtual=!1;e.getList2()}})},getHis:function(){var e,t,i=this;this.listLoading=!0,(e=this.proId,t=this.listQuery,Object(o.a)({url:"/projects/"+e+"/devices",method:"get",params:{size:t.size,page:t.page,deleted:!0}})).then(function(e){0===e.data.code&&(i.isHistory=!0,i.list=e.data.data.content,i.total=e.data.total,i.listLoading=!1,i.listLength=e.data.data.length,i.total=e.data.data.totalElements)})},getList2:function(){var e=o.a.defaults.baseURL+"/COSIMULATION",t=new p.a(e),i=c.a.over(t);i.debug=null;var a=this;i.connect({},function(e){i.subscribe("/onlineDevice",function(e){var t=e.body.replace(/[\\]/g,"");if(a.webResBody=JSON.parse(t),a.list.length>0)for(var i=0;i<a.list.length;i++){if(a.list[i].createTime)Date.parse(a.list[i].createTime)+3600*a.list[i].interval*1e3<(new Date).getTime()&&n(a.list[i].id).then(function(e){0!==e.data.code||a.getList()});a.list[i].online=!1,!1===a.list[i].online&&!0===a.list[i].virtual&&(a.list.splice(i,1),i--)}if(a.webResBody&&$.each(a.webResBody,function(e,t){var i=!1,s=[];if(a.list.length>0)for(var o=0;o<a.list.length;o++)if(!0!==a.list[o].virtual&&t.hostAddress===a.list[o].hostAddress){a.list[o].online=!0,a.list[o].cpuClock=t.cpuClock,a.list[o].cpuUtilization=t.cpuUtilization,a.list[o].ramTotalSize=t.ramTotalSize,a.list[o].ramFreeSize=t.ramFreeSize,a.list[o].ifChangeColor=(t.ramTotalSize-t.ramFreeSize)/t.ramTotalSize*100,a.list[o].virtual=!1,a.list[o].countTime=t.createTime,a.list[o].cpuData=parseInt(t.cpuUtilization),a.list[o].ramData=Math.round((t.ramTotalSize-t.ramFreeSize)/t.ramTotalSize*1e4)/100,a.list[o].upLoadSpeed=t.upLoadSpeed,a.list[o].downLoadSpeed=t.downLoadSpeed,a.list[o].ostype=t.ostype,i=!0;break}i||a.isHistory||(s.name=t.hostAddress,s.hostAddress=t.hostAddress,s.cpuClock=t.cpuClock,s.cpuUtilization=t.cpuUtilization,s.ramTotalSize=t.ramTotalSize,s.ramFreeSize=t.ramFreeSize,s.ifChangeColor=(t.ramTotalSize-t.ramFreeSize)/t.ramTotalSize*100,s.virtual=!0,s.online=!0,s.countTime=t.createTime,s.cpuData=parseInt(t.cpuUtilization),s.ramData=Math.round((t.ramTotalSize-t.ramFreeSize)/t.ramTotalSize*1e4)/100,s.upLoadSpeed=t.upLoadSpeed,s.downLoadSpeed=t.downLoadSpeed,s.ostype=t.ostype,a.list.push(s))}),a.list.length>0)for(var s=0;s<a.list.length;s++)m.default.set(a.list,s,a.list[s])})})},handleSizeChange:function(e){this.listQuery.size=e,this.pagesize=e,this.isHistory?this.getHis():this.getList()},handleCurrentChange:function(e){this.listQuery.page=e-1,this.currentPage=e,this.isHistory?this.getHis():this.getList()},resetTemp:function(){this.temp={name:"",hostAddress:"",deployPath:"",description:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},createData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){e.creDevLoading=!0;var i=new FormData;i.append("name",e.temp.name),i.append("hostAddress",e.temp.hostAddress),i.append("deployPath",e.temp.deployPath),i.append("description",e.temp.description),(a=e.proId,s=i,Object(o.a)({url:"/projects/"+a+"/device",method:"post",data:s})).then(function(t){e.creDevLoading=!1,e.dialogFormVisible=!1,e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.getList()}).catch(function(t){e.creDevLoading=!1,e.errorMessage="操作失败！",t.response.data.message&&(e.errorMessage=t.response.data.message),e.$notify({title:"创建设备失败",message:e.errorMessage,type:"error",duration:2e3})})}var a,s})},handleUpdate:function(e,t){var i=this;this.temp=s()({},e),this.dialogStatus="update",this.deviceId=e.id,this.dialogFormVisible=!0,this.currentDeviceIndex=t,this.$nextTick(function(){i.$refs.dataForm.clearValidate()}),this.$nextTick(function(){e.online&&(i.$refs.lineMarker.chart.dispose(),i.$refs.lineMarker.chartSpeed.dispose(),i.$refs.lineMarker.chart=null,i.$refs.lineMarker.chartSpeed=null,i.$refs.lineMarker.cpuArr=[],i.$refs.lineMarker.upstreamSpeedArr=[],i.$refs.lineMarker.downstreamSpeedArr=[],i.$refs.lineMarker.ramArr=[],i.$refs.lineMarker.initChart(),i.$refs.lineMarker.initSpeedChart(),i.$refs.dataForm.clearValidate())})},updateData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){e.upDevLoading=!0;var a=i("mw3O").stringify({name:e.temp.name,hostAddress:e.temp.hostAddress,deployPath:e.temp.deployPath,description:e.temp.description}),s=new FormData;s.append("name",e.temp.name),s.append("hostAddress",e.temp.hostAddress),s.append("deployPath",e.temp.deployPath),s.append("description",e.temp.description),s.append("enctype","multipart/form-data"),function(e,t){return Object(o.a)({method:"PATCH",url:"/devices/"+e,data:t})}(e.deviceId,a).then(function(t){e.upDevLoading=!1,e.dialogFormVisible=!1,e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.getList()}).catch(function(t){e.errorMessage="操作失败！",t.response.data.message&&(e.errorMessage=t.response.data.message),e.upDevLoading=!1,e.$notify({title:"修改设备失败",message:e.errorMessage,type:"error",duration:2e3})})}})},deleteDevice:function(e){var t=this;this.delLoading=!0,this.$confirm("确认取消预约吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n(e.id).then(function(e){0===e.data.code&&(t.delLoading=!1,t.$notify({title:"成功",message:"取消成功",type:"success",duration:2e3}),t.getList())}).catch(function(){t.delLoading=!1,t.$notify({title:"失败",message:"删除失败",type:"error",duration:2e3})})}).catch(function(){t.delLoading=!1,t.$message({type:"info",message:"已取消删除"})})},copyDevice:function(e){var t=this,a=i("mw3O"),r=e.id;this.temp=s()({},e);var n={name:this.temp.name};a.stringify(n);(function(e){return Object(o.a)({url:"/devices/"+e+"/copy",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"}})})(r).then(function(){t.list.unshift(t.temp),t.$notify({title:"成功",message:"复制成功",type:"success",duration:2e3}),t.getList()}).catch(function(){t.$notify({title:"失败",message:"复制失败",type:"error",duration:2e3})})},handleProcess:function(e){var t,i=this;this.processDialogVisible=!0,this.listLoading=!0,(t=e.id,Object(o.a)({url:"/devices/"+t+"/process",method:"get",headers:{"content-type":"application/x-www-form-urlencoded"}})).then(function(e){i.taskprocess=e.data.data,i.listLoading=!1}).catch(function(e){i.listLoading=!1,i.errorMessage="获取进程失败！",e.response.data.message&&(i.errorMessage=e.response.data.message),i.$notify({title:"失败",message:i.errorMessage,type:"error",duration:2e3})})},handleDisk:function(e){var t,i=this;this.diskDialogVisible=!0,this.listLoading=!0,(t=e.id,Object(o.a)({url:"/devices/"+t+"/disks",method:"get",headers:{"content-type":"application/x-www-form-urlencoded"}})).then(function(e){i.disks=e.data.data,i.listLoading=!1}).catch(function(e){i.listLoading=!1,i.errorMessage="获取硬盘信息失败！",e.response.data.message&&(i.errorMessage=e.response.data.message),i.$notify({title:"失败",message:i.errorMessage,type:"error",duration:2e3})})},handleReport:function(e){for(var t=this,i=0;i<this.list.length;i++){var a=this.list[i];if(a.subtask&&a.subtask.id===this.currentTaskId)return void this.$message({type:"warning",message:"当前子任务已预约设备 "+a.name+"，请勿重复预约"})}this.reportDialogVisible=!0,this.reportData.name=e.name,this.reportData.hostAddress=e.hostAddress,this.$nextTick(function(){t.$refs.reportForm.clearValidate()})},resetReport:function(){this.reportData.name="",this.reportData.hostAddress="",this.reportData.deployPath="",this.bookingTemp.reportPath="",this.bookingTemp.bookingTime=1},reportDevice:function(){var e,t=this,a=i("mw3O").stringify({name:this.reportData.name,hostAddress:this.reportData.hostAddress,description:"",userId:this.userId,subtaskId:this.currentTaskId,interval:this.bookingTemp.bookingTime});(e=a,Object(o.a)({url:"/devices",method:"post",data:e})).then(function(e){0===e.data.code?(t.$notify({title:"成功",message:"预约成功",type:"success",duration:2e3}),t.getList()):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3}),t.resetReport(),t.reportDialogVisible=!1}).catch(function(){t.resetReport(),t.$notify({title:"失败",message:"预约失败",type:"error",duration:2e3})})},handleCheckedProcess:function(e){this.checkedProcess=e,this.processIds.splice(0,this.processIds.length);for(var t=0;t<this.checkedProcess.length;t++)this.processIds.push(this.checkedProcess[t].id)},handleRouter:function(e){this.$router.push({name:"connectvnc",params:{id:e.id,ip:e.hostAddress}})},showNow:function(){this.getList()},showHistory:function(){this.currentDeviceIndex=0,this.getHis()},handleClean:function(e){var t=this;this.$confirm("确认彻底删除此设备吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.listLoading=!0,n(e.id).then(function(){t.listLoading=!1,t.showHistory(),t.$notify({title:"成功",message:"清除成功！",type:"success",duration:2e3})}).catch(function(){t.listLoading=!1,t.$notify({title:"失败",message:"清除失败！",type:"error",duration:2e3})})}).catch(function(){t.$message({type:"info",message:"已取消清除"})})},handleRestore:function(e){var t=this;this.$confirm("确认恢复此设备吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i;t.listLoading=!0,(i=e.id,Object(o.a)({url:"/devices/"+i+"/restore",method:"patch"})).then(function(){t.listLoading=!1,t.showHistory(),t.$notify({title:"成功",message:"恢复成功！",type:"success",duration:2e3})}).catch(function(){t.listLoading=!1,t.$notify({title:"失败",message:"恢复失败！",type:"error",duration:2e3})})}).catch(function(){t.$message({type:"info",message:"已取消恢复"})})},checkBooking:function(e){this.bookingInfo={realName:e.users.realName,startTime:e.createTime,bookingTime:e.interval,taskName:e.subtask.name,proName:e.subtask.project.name},this.bookingInfoDialog=!0}},computed:{listA:function(){var e=this;return e.list.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.searchQuery.toLowerCase())})},listenProjectId:function(){return this.$store.state.app.projectId},computedUpStream:function(){return function(e){return e>=0&&e<=1e3?Math.round(10*e)/10+"KB/S":e>1e3?Math.round(e/10)/100+"MB/S":e?void 0:"0KB/S"}},computedDownStream:function(){return function(e){return e>=0&&e<=1e3?Math.round(10*e)/10+"KB/S":e>1e3?Math.round(e/10)/100+"MB/S":e?void 0:"0KB/S"}},computedSize:function(){return function(e){return e<1?Math.round(1024*e)+"KB":e<1e3?Math.round(e)+"MB":Math.round(e/1024)+"GB"}},computedRamSize:function(){return function(e){return e.ramTotalSize&&e.ramFreeSize?0==e.ramTotalSize?0:Math.round((e.ramTotalSize-e.ramFreeSize)/e.ramTotalSize*1e4)/100:"--"}},computedOs:function(){return function(e){return 0==e?"unknownOs":1==e?"windows":2==e?"linux":3==e?"vxworks":"unknownOs"}}},watch:{listenProjectId:function(){this.proId=this.getCookie("projectId"),this.getList()}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"240px"},attrs:{placeholder:e.$t("table.deviceName")},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),e._v(" "),e.isHistory?e._e():i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.listA,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:e.$t("table.deviceName"),width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"link-type",on:{click:function(i){e.handleUpdate(t.row,t.$index)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"140px",align:"center",label:e.$t("table.deviceIP")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.hostAddress))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"80px",align:"center",label:"操作系统"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"font-size":"28px"}},[i("svg-icon",{attrs:{"icon-class":e.computedOs(t.row.ostype)}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"90px",align:"center",label:"CPU"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.online?i("span",[e._v(e._s(Math.round(t.row.cpuClock/1e3*100)/100)+"GHz")]):i("span",[e._v("--")])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100px",align:"center",label:"CPU利用率"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.online?i("span",[e._v(e._s(t.row.cpuUtilization)+"%")]):i("span",[e._v("--")])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100px",align:"center",label:"内存利用率"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.online?t.row.ifChangeColor<70?i("span",[e._v(e._s(e.computedRamSize(t.row))+"%")]):t.row.ifChangeColor>=70&&t.row.ifChangeColor<85?i("span",{staticStyle:{color:"#FF8C00"}},[e._v(e._s(e.computedRamSize(t.row))+"%")]):t.row.ifChangeColor>=85?i("span",{staticStyle:{color:"#FF0000"}},[e._v(e._s(e.computedRamSize(t.row))+"%")]):e._e():i("span",[e._v("--")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:e.$t("table.deviceState")},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.online?i("span",{staticClass:"el-tag el-tag--danger"},[e._v("离线")]):i("span",{staticClass:"el-tag el-tag--primary"},[e._v("在线")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:e.$t("table.check"),"min-width":"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.online&&!t.row.virtual?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.handleProcess(t.row)}}},[e._v(e._s(e.$t("table.deviceProcess")))]):e._e(),e._v(" "),t.row.online&&!t.row.virtual?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){e.handleDisk(t.row)}}},[e._v(e._s(e.$t("table.disk")))]):e._e(),e._v(" "),!t.row.online||t.row.virtual?i("el-button",{attrs:{type:"primary",disabled:"disabled",size:"mini"}},[e._v(e._s(e.$t("table.deviceProcess")))]):e._e(),e._v(" "),!t.row.online||t.row.virtual?i("el-button",{attrs:{size:"mini",disabled:"disabled",type:"success"}},[e._v(e._s(e.$t("table.disk")))]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"预约人"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.users?i("span",[e._v(e._s(t.row.users.realName))]):i("span",[e._v("--")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:e.$t("table.actions"),width:"140","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.virtual?e._e():i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{attrs:{type:"success",plain:"",size:"small"}},[e._v("更多操作")])],1),e._v(" "),t.row.deleted?e._e():i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("span",{staticStyle:{display:"inline-block",padding:"0 10px"},on:{click:function(i){e.checkBooking(t.row)}}},[e._v("查看预约详情")])]),e._v(" "),i("el-dropdown-item",{attrs:{divided:""}},[e.userId===t.row.users.id?i("span",{staticStyle:{display:"inline-block",padding:"0 10px"},on:{click:function(i){e.deleteDevice(t.row)}}},[e._v("取消预约")]):e._e()])],1)],1),e._v(" "),t.row.virtual?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.handleReport(t.row)}}},[e._v("预约")]):e._e()]}}])})],1),e._v(" "),e.isHistory?e._e():i("el-dialog",{staticClass:"modDeviceDialog",attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:e.deviceRules,model:e.temp,"label-width":"100px",disabled:!0}},[i("el-form-item",{attrs:{label:e.$t("table.deviceName"),prop:"name"}},[i("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("table.deviceIP"),prop:"hostAddress"}},[i("el-input",{model:{value:e.temp.hostAddress,callback:function(t){e.$set(e.temp,"hostAddress",t)},expression:"temp.hostAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("table.deviceDesc"),prop:"description"}},[i("el-input",{model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}})],1)],1),e._v(" "),e.isHistory||"update"!==e.dialogStatus||1!=e.list[e.currentDeviceIndex].online?e._e():i("lineMarker",{ref:"lineMarker",staticStyle:{"margin-bottom":"10px"},attrs:{countTime:e.list[e.currentDeviceIndex].countTime,cpuData:e.list[e.currentDeviceIndex].cpuData,ramData:e.list[e.currentDeviceIndex].ramData,upSpeed:e.list[e.currentDeviceIndex].upLoadSpeed,downSpeed:e.list[e.currentDeviceIndex].downLoadSpeed}})],1),e._v(" "),i("el-dialog",{attrs:{title:"磁盘",visible:e.diskDialogVisible},on:{"update:visible":function(t){e.diskDialogVisible=t}}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.disks,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:e.$t("table.deviceName"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:e.$t("table.size")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.size)+"G")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:e.$t("table.usedSize")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.usedSize)+"G")])]}}])})],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.diskDialogVisible=!1}}},[e._v(e._s(e.$t("table.close")))])],1)],1),e._v(" "),i("el-dialog",{staticClass:"processDialog",attrs:{title:"进程",visible:e.processDialogVisible},on:{"update:visible":function(t){e.processDialogVisible=t}}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.taskprocess,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":"",stripe:"",height:"100%"},on:{"selection-change":e.handleCheckedProcess}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"pid"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.pid))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:e.$t("table.processName")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"占用内存"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.computedSize(t.row.ramUsedSize)))])]}}])})],1),e._v(" "),i("div",{staticStyle:{float:"right","margin-top":"10px"}},[i("el-button",{on:{click:function(t){e.processDialogVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"组件进程监控",visible:e.compProcessDialogVisible},on:{"update:visible":function(t){e.compProcessDialogVisible=t}}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.taskprocess,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"进程"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v("--")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v("--")])]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"请填写预约信息",visible:e.reportDialogVisible,width:"40%"},on:{"update:visible":function(t){e.reportDialogVisible=t}}},[i("el-form",{ref:"reportForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:e.bookingRules,model:e.bookingTemp,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"预约时间（小时）","label-width":"140px"}},[i("el-input-number",{attrs:{size:"small","controls-position":"right","step-strictly":""},model:{value:e.bookingTemp.bookingTime,callback:function(t){e.$set(e.bookingTemp,"bookingTime",t)},expression:"bookingTemp.bookingTime"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reportDialogVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.reportDevice}},[e._v(e._s(e.$t("table.confirm")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"预约详情",visible:e.bookingInfoDialog,width:"40%"},on:{"update:visible":function(t){e.bookingInfoDialog=t}}},[i("el-form",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{model:e.bookingInfo,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"预约人","label-width":"140px"}},[i("span",[e._v(e._s(e.bookingInfo.realName))])]),e._v(" "),i("el-form-item",{attrs:{label:"项目名称","label-width":"140px"}},[i("span",[e._v(e._s(e.bookingInfo.proName))])]),e._v(" "),i("el-form-item",{attrs:{label:"任务名称","label-width":"140px"}},[i("span",[e._v(e._s(e.bookingInfo.taskName))])]),e._v(" "),i("el-form-item",{attrs:{label:"开始时间","label-width":"140px"}},[i("span",[e._v(e._s(e.bookingInfo.startTime))])]),e._v(" "),i("el-form-item",{attrs:{label:"预约时长","label-width":"140px"}},[i("span",[e._v(e._s(e.bookingInfo.bookingTime)+"小时")])])],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.bookingInfoDialog=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var b=i("VU/8")(f,g,!1,function(e){i("ShBd")},"data-v-09802af0",null);t.default=b.exports},"9nW3":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XLwt"),s=i.n(a),o=i("0xDb"),r={mixins:[{mounted:function(){var e=this;this.__resizeHanlder=Object(o.a)(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHanlder)}}],props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"90%"},height:{type:String,default:"400px"},countTime:{type:String,default:""},cpuData:{type:Number,default:null},ramData:{type:Number,default:0},upSpeed:{type:Number,default:0},downSpeed:{type:Number,default:0}},data:function(){return{chart:null,chartSpeed:null,cpuArr:[],ramArr:[],upstreamSpeedArr:[],downstreamSpeedArr:[]}},mounted:function(){this.initChart(),this.initSpeedChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null,this.chartSpeed.dispose(),this.chartSpeed=null)},methods:{initChart:function(){this.chart=s.a.init(document.getElementById(this.id)),this.chart.setOption({title:{top:20,text:"CPU、内存详情",textStyle:{fontWeight:"normal",fontSize:16,color:"#000"},left:"1%"},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#57617B"}}},legend:{top:20,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:["CPU","RAM"],right:"4%",textStyle:{fontSize:12}},grid:{top:100,left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#57617B"}},data:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]}],yAxis:[{type:"value",name:"(占用率：%)",axisTick:{show:!1},max:100,min:0,axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:[{name:"CPU",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new s.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(137, 189, 27, 0.6)"},{offset:.8,color:"rgba(137, 189, 27, 0.4)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(137,189,27)",borderColor:"rgba(137,189,2,0.27)",borderWidth:12}},data:this.cpuArr},{name:"RAM",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new s.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(199, 21, 133, 0.3)"},{offset:.8,color:"rgba(199, 21, 133, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(199, 21, 133)",borderColor:"rgba(199, 21, 133, 0.2)",borderWidth:12}},data:this.ramArr}]})},initSpeedChart:function(){this.chartSpeed=s.a.init(document.getElementById("speed")),this.chartSpeed.setOption({title:{top:20,text:"上下行速度",textStyle:{fontWeight:"normal",fontSize:16},left:"1%"},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#57617B"}}},legend:{top:20,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:["上行速度","下行速度"],right:"4%",textStyle:{fontSize:12}},grid:{top:100,left:"3%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#57617B"}},data:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"]}],yAxis:[{type:"value",name:"（KB/S）",axisTick:{show:!1},axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:[{name:"上行速度",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new s.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(65, 105, 225, 0.3)"},{offset:.8,color:"rgba(65, 105, 225, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(65, 105, 225)",borderColor:"rgba(65, 105, 225, 0.27)",borderWidth:12}},data:this.upstreamSpeedArr},{name:"下行速度",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new s.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 69, 0, 0.3)"},{offset:.8,color:"rgba(255, 69, 0, 0)"}],!1),shadowColor:"rgba(255, 69, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(255, 69, 0)",borderColor:"rgba(255, 69, 0, 0.2)",borderWidth:12}},data:this.downstreamSpeedArr}]})}},computed:{listenCount:function(){return this.countTime}},watch:{listenCount:function(){this.cpuArr.push(this.cpuData),this.ramArr.push(this.ramData),this.upstreamSpeedArr.push(this.upSpeed),this.downstreamSpeedArr.push(this.downSpeed),this.cpuArr.length>16&&(this.cpuArr.splice(0,this.cpuArr.length-16),this.ramArr.splice(0,this.ramArr.length-16),this.upstreamSpeedArr.splice(0,this.upstreamSpeedArr.length-16),this.downstreamSpeedArr.splice(0,this.downstreamSpeedArr.length-16)),this.initChart(),this.initSpeedChart()}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{class:e.className,staticStyle:{margin:"20px auto",border:"1px solid #f0f2f5"},style:{height:e.height,width:e.width},attrs:{id:e.id,cpuData:e.cpuData,ramData:e.ramData}}),e._v(" "),i("div",{staticClass:"className",staticStyle:{margin:"0 auto",border:"1px solid #f0f2f5"},style:{height:e.height,width:e.width},attrs:{id:"speed",upSpeed:e.upSpeed,downSpeed:e.downSpeed}})])},staticRenderFns:[]},l=i("VU/8")(r,n,!1,null,null,null);t.default=l.exports},ShBd:function(e,t,i){var a=i("/1Rw");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("075c48ae",a,!0)},cAgV:function(e,t,i){"use strict";var a=i("woOf"),s=i.n(a),o=(i("ctMr"),{bind:function(e,t){e.addEventListener("click",function(i){var a=s()({},t.value),o=s()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),r=o.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var n=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(n.width,n.height)+"px",r.appendChild(l)),o.type){case"center":l.style.top=n.height/2-l.offsetHeight/2+"px",l.style.left=n.width/2-l.offsetWidth/2+"px";break;default:l.style.top=i.pageY-n.top-l.offsetHeight/2-document.body.scrollTop+"px",l.style.left=i.pageX-n.left-l.offsetWidth/2-document.body.scrollLeft+"px"}return l.style.backgroundColor=o.color,l.className="waves-ripple z-active",!1}},!1)}}),r=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;t.a=o},ctMr:function(e,t,i){var a=i("z4F4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("a7c9def6",a,!0)},z4F4:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""])}});