webpackJsonp([37],{"3tda":function(t,e,a){var i=a("8+tn");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("e809f58a",i,!0)},"8+tn":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.show-pwd[data-v-d766606a] {\n  position: absolute;\n  right: 10px;\n  top: 2px;\n  font-size: 16px;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.userManage-container[data-v-d766606a] {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  background-color: #2d3a4b;\n}\n.userManage-container .login-form[data-v-d766606a] {\n    position: absolute;\n    left: 0;\n    right: 0;\n    width: 60%;\n    height: 100%;\n    padding: 0px 35px 15px 35px;\n    margin: 10px auto;\n}\n.userManage-container .svg-container[data-v-d766606a] {\n    padding: 6px 5px 6px 15px;\n    color: #889aa4;\n    vertical-align: middle;\n    width: 30px;\n    display: inline-block;\n}\n.userManage-container .svg-container_login[data-v-d766606a], .userManage-container .svg-container_ip[data-v-d766606a] {\n      font-size: 20px;\n}\n.userManage-container .title-container[data-v-d766606a] {\n    position: relative;\n}\n.userManage-container .title-container .title[data-v-d766606a] {\n      font-size: 26px;\n      font-weight: 400;\n      color: #eee;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n}\n.userManage-container .title-container .set-language[data-v-d766606a] {\n      color: #fff;\n      position: absolute;\n      top: 5px;\n      right: 0px;\n}\n.right-menu[data-v-d766606a] {\n  float: right;\n  height: 100%;\n}\n.right-menu[data-v-d766606a]:focus {\n    outline: none;\n}\n.right-menu .right-menu-item[data-v-d766606a] {\n    display: inline-block;\n    margin: 0 8px;\n}\n.right-menu .avatar-container[data-v-d766606a] {\n    height: 50px;\n    margin-right: 30px;\n}\n.right-menu .avatar-container .avatar-wrapper[data-v-d766606a] {\n      cursor: pointer;\n      margin-top: 5px;\n      position: relative;\n}\n.right-menu .avatar-container .avatar-wrapper .user-avatar[data-v-d766606a] {\n        width: 40px;\n        height: 40px;\n        border-radius: 10px;\n}\n.right-menu .avatar-container .avatar-wrapper .el-icon-caret-bottom[data-v-d766606a] {\n        position: absolute;\n        right: -20px;\n        top: 25px;\n        font-size: 12px;\n}\n",""])},"PRt/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("kCe2"),n=a("E4LH"),s=a("XlQU"),o=a("/t6J"),r=a("IcnI"),l={components:{PanThumb:i.a},name:"login",data:function(){var t=this,e=function(e,a,i){Object(n.a)(a)?(i(),t.passwordValidate=!0,t.passwordValidate&&t.pasAgainValidate&&(t.btnConfirm=!1)):(i(new Error("密码必须是6-16位数字和字母的组合！")),t.btnConfirm=!0,t.passwordValidate=!1)};return{userName:"",selectedId:"",selectUserRoleId:"",tableKey:0,list:[],roleList:[],listQuery:{page:0,size:10,limit:5,tagname:""},total:null,pagesize:10,currentPage:1,dialogFormVisible:!1,createUserFormVisible:!1,editRoleDialog:!1,modifyPasswordVisible:!1,addLoading:!1,modLoading:!1,delLoading:!1,passwordType:"password",passwordTypeAgain:"password",btnConfirm:!1,passwordValidate:!1,pasAgainValidate:!1,formLabelWidth:"100px",searchQuery:"",temp:{id:"",name:"",description:""},form:{passwordAgain:"",passwordNew:""},createForm:{username:"",password:"",passwordAgain:""},rules:{username:[{required:!0,trigger:"blur",validator:function(t,e,a){Object(n.b)(e)?a():a(new Error("请输入用户名！"))}}],password:[{required:!0,trigger:"blur",validator:e}],passwordAgain:[{required:!0,trigger:"blur",validator:function(e,a,i){Object(n.a)(a)?t.createForm.passwordAgain!==t.createForm.password?(t.btnConfirm=!0,t.pasAgainValidate=!1,i(new Error("两次密码输入不一致，请再次输入新密码！"))):(i(),t.pasAgainValidate=!0,t.passwordValidate&&t.pasAgainValidate&&(t.btnConfirm=!1)):(i(new Error("密码必须是6-16位数字和字母的组合！")),t.btnConfirm=!0,t.pasAgainValidate=!1)}}]},modifyRules:{passwordNew:[{required:!0,trigger:"blur",validator:e}],passwordAgain:[{required:!0,trigger:"blur",validator:function(e,a,i){a.length<6?(i(new Error("请输入正确的密码,至少六位！")),t.btnConfirm=!0,t.pasAgainValidate=!1):t.form.passwordAgain!==t.form.passwordNew?(t.btnConfirm=!0,t.pasAgainValidate=!1,i(new Error("两次密码输入不一致，请再次输入新密码！"))):(i(),t.pasAgainValidate=!0,t.passwordValidate&&t.pasAgainValidate&&(t.btnConfirm=!1))}}]},loading:!1,listLoading:!0,showDialog:!1,userData:{username:"",password:""},token:"",role:""}},created:function(){this.userName=this.getCookie("username"),this.role=r.a.getters.roles,this.getList()},methods:{showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},showPwdAgain:function(){"password"===this.passwordTypeAgain?this.passwordTypeAgain="":this.passwordTypeAgain="password"},logout:function(){this.$store.dispatch("FedLogOut").then(function(){location.reload()})},resetCreate:function(){this.createForm={username:"",password:"",passwordAgain:""}},resetModify:function(){this.form={passwordAgain:"",passwordNew:""}},getList:function(){var t=this;this.listLoading=!0,"admin"==this.role&&Object(s.b)(this.listQuery).then(function(e){t.list=e.data.data,t.listLoading=!1})},handleCreate:function(){var t=this;this.resetCreate(),this.createUserFormVisible=!0,this.$nextTick(function(){t.$refs.createDataForm.clearValidate()})},createUser:function(){var t=this;this.$refs.createDataForm.validate(function(e){if(e){t.addLoading=!0;a("mw3O");var i={username:t.createForm.username,password:t.createForm.password};Object(s.c)(i).then(function(e){t.addLoading=!1,0===e.data.code?(t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.getList(),t.createUserFormVisible=!1):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})})}})},handleUpdate:function(t){var e=this;this.resetModify(),this.selectedId=t.id,this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.modifyDataForm.clearValidate()})},updateUser:function(){var t=this;this.$refs.modifyDataForm.validate(function(e){if(e){t.modLoading=!0;var i={username:t.form.passwordNew},n=t.selectedId,o=a("mw3O").stringify(i);Object(s.m)(o,n).then(function(e){t.modLoading=!1,t.dialogFormVisible=!1,0===e.data.code?(t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.getList()):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})})}})},handleDelete:function(t){var e=this,a=t.id;t.delLoading=!0,this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.e)(a).then(function(a){t.delLoading=!1,0===a.data.code?(e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()):e.$notify({title:"失败",message:"删除失败",type:"error",duration:2e3})})}).catch(function(){t.delLoading=!1,e.$message({type:"info",message:"已取消删除"})})},handleDisable:function(t){var e=this,i=t.id;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=a("mw3O").stringify({enabled:!1});Object(s.f)(i,n).then(function(a){t.delLoading=!1,0===a.data.code?(e.$notify({title:"成功",message:"禁用成功",type:"success",duration:2e3}),e.getList()):e.$notify({title:"失败",message:"禁用失败",type:"error",duration:2e3})})}).catch(function(){t.delLoading=!1,e.$message({type:"info",message:"已取消删除"})})},clickSelectRole:function(){var t=this;Object(o.c)(this.listQuery).then(function(e){0===e.data.code&&(t.roleList=e.data.data)})},handleSetRole:function(t){this.selectedId=t.id,this.editRoleDialog=!0},setUserRole:function(){var t={roleId:this.selectUserRoleId},e=a("mw3O").stringify(t);Object(s.g)(this.selectedId,e).then(function(t){t.data.code})},handleSizeChange:function(t){this.listQuery.size=t,this.pagesize=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t-1,this.currentPage=t,this.getList()}},computed:{listA:function(){var t=this;return t.list.filter(function(e){return-1!==e.username.toLowerCase().indexOf(t.searchQuery.toLowerCase())})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userManage-container"},[a("el-header",[a("div",{staticClass:"right-menu"},[a("span",{staticStyle:{position:"relative",top:"-12px",color:"#fff"},attrs:{calss:"userName"}},[t._v(t._s(t.userName))]),t._v(" "),a("el-dropdown",{staticClass:"avatar-container right-menu-item",attrs:{trigger:"click"}},[a("div",{staticClass:"avatar-wrapper"},[a("pan-thumb",{staticClass:"proImg",attrs:{width:"40px",height:"40px",image:"./2/jpg"}}),t._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:"/projectManage"}},[a("el-dropdown-item",[a("span",{staticStyle:{display:"block"}},[t._v("项目管理")])])],1),t._v(" "),a("el-dropdown-item",{attrs:{divided:""}},[a("span",{staticStyle:{display:"block"},on:{click:t.logout}},[t._v(t._s(t.$t("navbar.logOut")))])])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"login-form"},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[t._v("\n        用户管理\n      ")]),t._v(" "),a("div",[a("div",{staticClass:"searchContainer",staticStyle:{display:"inline-block","margin-bottom":"16px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-top":"2px"},attrs:{size:"mini",type:"success"},on:{click:t.handleCreate}},[t._v("添加\n        ")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%","border-radius":"8px"},attrs:{data:t.listA,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":"",height:"65%"}},[a("el-table-column",{attrs:{"min-width":"150px",label:t.$t("table.username")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type",on:{click:function(a){t.handleUpdate(e.row)}}},[t._v(t._s(e.row.username))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:t.$t("table.actions"),"min-width":"250","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return["admin"!==e.row.roleEntity.name?a("el-button",{staticStyle:{padding:"7px 4px"},attrs:{size:"mini",type:"danger",loading:e.row.delLoading},on:{click:function(a){t.handleSetRole(e.row)}}},[t._v("修改角色\n          ")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleUpdate(e.row)}}},[t._v(t._s(t.$t("table.edit")))]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleDisable(e.row)}}},[t._v("禁用")]),t._v(" "),"admin"!==e.row.roleEntity.name?a("el-button",{attrs:{size:"mini",type:"danger",loading:e.row.delLoading},on:{click:function(a){t.handleDelete(e.row)}}},[t._v(t._s(t.$t("table.delete"))+"\n          ")]):t._e()]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:this.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:t.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"modifyDataForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:t.modifyRules,model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新用户名",prop:"passwordNew"}},[a("el-input",{model:{value:t.form.passwordNew,callback:function(e){t.$set(t.form,"passwordNew",e)},expression:"form.passwordNew"}}),t._v(" "),a("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[a("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"再次输入",prop:"passwordAgain"}},[a("el-input",{model:{value:t.form.passwordAgain,callback:function(e){t.$set(t.form,"passwordAgain",e)},expression:"form.passwordAgain"}}),t._v(" "),a("span",{staticClass:"show-pwd",on:{click:t.showPwdAgain}},[a("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{attrs:{disabled:this.btnConfirm,type:"primary",loading:t.modLoading},on:{click:t.updateUser}},[t._v(t._s(t.$t("table.confirm")))])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:t.createUserFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.createUserFormVisible=e}}},[a("el-form",{ref:"createDataForm",staticStyle:{width:"400px",margin:"0 auto"},attrs:{rules:t.rules,model:t.createForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{type:"text"},model:{value:t.createForm.username,callback:function(e){t.$set(t.createForm,"username",e)},expression:"createForm.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:t.passwordType},model:{value:t.createForm.password,callback:function(e){t.$set(t.createForm,"password",e)},expression:"createForm.password"}}),t._v(" "),a("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[a("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"再次输入",prop:"passwordAgain"}},[a("el-input",{attrs:{type:t.passwordTypeAgain},model:{value:t.createForm.passwordAgain,callback:function(e){t.$set(t.createForm,"passwordAgain",e)},expression:"createForm.passwordAgain"}}),t._v(" "),a("span",{staticClass:"show-pwd",on:{click:t.showPwdAgain}},[a("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.createUserFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{attrs:{disabled:this.btnConfirm,type:"primary",loading:t.addLoading},on:{click:t.createUser}},[t._v(t._s(t.$t("table.confirm")))])],1)],1),t._v(" "),a("el-dialog",{staticClass:"editDialog",attrs:{title:"编辑用户角色",visible:t.editRoleDialog,"append-to-body":"",width:"30%"},on:{"update:visible":function(e){t.editRoleDialog=e}}},[a("el-select",{attrs:{placeholder:"请选择"},nativeOn:{click:function(e){t.clickSelectRole(e)}},model:{value:t.selectUserRoleId,callback:function(e){t.selectUserRoleId=e},expression:"selectUserRoleId"}},t._l(t.roleList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editRoleDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.setUserRole()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("3tda")},"data-v-d766606a",null);e.default=c.exports}});