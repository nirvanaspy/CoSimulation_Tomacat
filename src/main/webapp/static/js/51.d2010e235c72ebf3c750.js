webpackJsonp([51],{"+lwl":function(e,t,n){var a=n("Q615");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("294b4be4",a,!0)},Q615:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,'\n@charset "UTF-8";\n.editor-create[data-v-582c669d] {\n  right: 35px;\n  position: absolute;\n  top: 40px;\n  z-index: 1000;\n  color: #12d0d5;\n  cursor: pointer;\n}\n.managerCont[data-v-582c669d] {\n  height: 100%;\n  padding-right: 30px;\n}\n.managerCont .managerAvatar[data-v-582c669d] {\n    width: 100px;\n    height: 100px;\n    padding: 6px;\n    background: #fff;\n    border-radius: 50%;\n    padding: 8px;\n    margin: 0 auto;\n}\n.managerCont .managerAvatar .avatar[data-v-582c669d] {\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n      background: #ddd;\n      border-radius: 50%;\n      font-size: 60px;\n      line-height: 80px;\n}\n.managerCont .managerInfo[data-v-582c669d] {\n    width: 100%;\n    padding: 30px 0;\n}\n.managerCont .managerInfo .info-title[data-v-582c669d], .managerCont .managerInfo .info-mes[data-v-582c669d] {\n      width: 50%;\n      display: inline-block;\n      text-align: left;\n}\n.managerCont .managerInfo .info-title span[data-v-582c669d], .managerCont .managerInfo .info-mes span[data-v-582c669d] {\n        display: block;\n}\n.managerCont .managerInfo .infoBox[data-v-582c669d] {\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      height: 35px;\n      line-height: 35px;\n      padding-left: 8px;\n}\n.managerCont .managerInfo .infoBox span[data-v-582c669d] {\n        display: inline-block;\n        width: 50%;\n        text-align: left;\n        color: #777777;\n        font-size: 13px;\n}\n.managerCont .managerInfo .infoBox[data-v-582c669d]:nth-child(odd) {\n      background: #fff;\n}\n.usermanageCont[data-v-582c669d] {\n  /*隐藏滚动条，当IE下溢出，仍然可以滚动*/\n  -ms-overflow-style: none;\n  /*火狐下隐藏滚动条*/\n  overflow: -moz-scrollbars-none;\n  scrollbar-width: none;\n}\n/*Chrome下隐藏滚动条，溢出可以透明滚动*/\n.usermanageCont[data-v-582c669d]::-webkit-scrollbar {\n  width: 0px;\n}\n.usermanageCont[data-v-582c669d] {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding: 32px;\n  background-color: #f2f8f9;\n  width: 100%;\n  overflow-y: scroll;\n  position: absolute;\n  top: 63px;\n  bottom: 0;\n}\n.usermanageCont .user-item[data-v-582c669d] {\n    position: relative;\n    overflow: hidden;\n    border-bottom: 1px solid #eee;\n}\n.usermanageCont .editor-box[data-v-582c669d] {\n    position: absolute;\n    top: 4px;\n    right: 0px;\n}\n.usermanageCont .editor-box .editor-item[data-v-582c669d] {\n      width: 20px;\n      margin-right: 4px;\n      font-size: 18px;\n      cursor: pointer;\n}\n.usermanageCont .editor-box .editor-item.editor-create[data-v-582c669d] {\n        color: #12d0d5;\n}\n.usermanageCont .editor-box .editor-item.editor-edit[data-v-582c669d] {\n        color: #3f9fe1;\n}\n.usermanageCont .editor-box .editor-item.editor-delete[data-v-582c669d] {\n        color: #e9662c;\n}\n.usermanageCont .editor-box .editor-item.editor-disable[data-v-582c669d] {\n        color: #f04d4e;\n}\n.usermanageCont .editor-box .editor-item.editor-enable[data-v-582c669d] {\n        position: relative;\n        top: 1px;\n        color: #2eb2dc;\n}\n.usermanageCont .avatarCont[data-v-582c669d] {\n    float: left;\n    width: 60px;\n    height: 100%;\n    font-size: 40px;\n}\n.usermanageCont .avatarCont .user-avatar[data-v-582c669d] {\n      display: inline-block;\n      /*width: 40px;\n      height: 40px;*/\n      margin-top: 8px;\n      border-radius: 6px;\n      text-align: center;\n      cursor: pointer;\n}\n.usermanageCont .userMesCont[data-v-582c669d] {\n    float: left;\n    width: calc(100% - 80px);\n    height: 100%;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 10px;\n    text-align: left;\n}\n.usermanageCont .userMesCont .name[data-v-582c669d] {\n      color: #777777;\n      font-size: 14px;\n      position: relative;\n}\n.usermanageCont .userMesCont .userSecret[data-v-582c669d] {\n      margin-top: 6px;\n}\n.usermanageCont .userMesCont .username-title[data-v-582c669d] {\n      color: #777;\n      font-size: 14px;\n}\n.usermanageCont .userMesCont .username-text[data-v-582c669d] {\n      color: #777;\n      font-weight: 500;\n      font-size: 14px;\n      margin-left: 10px;\n}\n.usermanageCont .userMesCont .secret-text[data-v-582c669d] {\n      color: #777;\n      font-weight: 500;\n      font-size: 14px;\n      margin-left: 22px;\n}\n.usermanageCont .userMesCont .userMes div[data-v-582c669d] {\n      /*height: 24px;\n      line-height: 24px;*/\n      /*height: 30px;\n      line-height: 30px;*/\n}\n.usermanageCont .userMesCont .switchrole[data-v-582c669d] {\n      margin-left: 10px;\n      font-size: 20px;\n      cursor: pointer;\n}\n.usermanageCont .userMesCont .role-text[data-v-582c669d] {\n      display: inline-block;\n      height: 30px;\n      position: absolute;\n      top: 8px;\n      bottom: 0;\n}\n.usermanageCont .userboard[data-v-582c669d] {\n    background: #fff;\n    padding: 0 18px 18px 0;\n}\n.usermanageCont .role-icon[data-v-582c669d] {\n    display: block;\n    width: 100%;\n    height: 48px;\n    padding-left: 10px;\n    background: rgba(66, 156, 255, 0.66);\n    font-size: 40px;\n}\n.filiter-box[data-v-582c669d] {\n  text-align: left;\n  padding-bottom: 20px;\n  padding-left: 8px;\n  border-bottom: 1px solid #eee;\n}\n.input-group[data-v-582c669d] {\n  padding: 0 10px;\n}\n.input-group-button[data-v-582c669d] {\n  height: 32px;\n  width: 32px;\n  line-height: 32px;\n  position: relative;\n  top: 1px;\n  left: -10px;\n  display: inline-block;\n  background: #12d0d5;\n  cursor: pointer;\n  text-align: center;\n}\n.role-edit-box[data-v-582c669d] {\n  position: absolute;\n  top: -40px;\n  right: 10px;\n}\n.role-edit[data-v-582c669d] {\n  color: #4a7de6;\n  cursor: pointer;\n}\n.role-delete[data-v-582c669d] {\n  color: #e9662c;\n  cursor: pointer;\n}\n.role-name[data-v-582c669d], .role-description[data-v-582c669d] {\n  height: 20px;\n  line-height: 20px;\n  padding: 4px 0;\n  font-size: 13px;\n  color: #777;\n}\n',""])},qW5S:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("woOf"),s=n.n(a),i=n("XlQU"),o=(n("5ybE"),n("/t6J"),n("IcnI"),{name:"security",data:function(){return{listQuery:{page:0,size:10,limit:5},role:"",nowTabs:null,selectedUserId:"",userList:[],roleList:[],departmentList:[],userInfo:{id:"",username:"",realName:"",password:"",newPassword:"",passwordAgain:"",secretClass:0,department:null},createUserInfo:{username:"",realName:"",password:"",passwordAgain:"",roleName:"",departmentName:""},secretOptions:[{value:0,name:"公开"},{value:1,name:"内部"},{value:2,name:"秘密"},{value:3,name:"机密"}],roleInfo:{id:"",name:"",description:""},createRoleInfo:{name:"",description:""},managerInfo:null,createDialogVisible:!1,editDialogVisible:!1,editSecretClassDialog:!1,deleteDialogVisible:!1,createRoleDialog:!1,editRoleDialog:!1,editPassDialog:!1,editDepaDialog:!1,addUserLoading:!1,searchQuery:""}},created:function(){this.role=this.$store.getters.roles[0],this.getUserList()},mounted:function(){},methods:{getUserList:function(){var e=this;Object(i.b)(this.listQuery).then(function(t){0===t.data.code?(e.userList=t.data.data,e.userList.forEach(function(e){e.originRoleEntities=e.roleEntities})):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3})})},resetCreateUser:function(){this.createUserInfo={username:"",password:"",passwordAgain:"",realName:"",roleName:""}},handleEditSecretClass:function(e){"ROLE_SECURITY_GUARD"===this.role&&(this.editSecretClassDialog=!0,this.userInfo=s()({},e))},handleDisableUser:function(e){var t=this;this.$confirm("确认禁用此用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=n("mw3O").stringify({enabled:!1});Object(i.f)(e.id,a).then(function(e){0===e.data.code?(t.getUserList(),t.$notify({title:"成功",message:"用户禁用成功",type:"success",duration:2e3})):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})})})},handleEnableUser:function(e){var t=this;this.$confirm("确认将此用户解禁吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=n("mw3O").stringify({enabled:!0});Object(i.f)(e.id,a).then(function(e){0===e.data.code?(t.getUserList(),t.$notify({title:"成功",message:"用户解禁成功",type:"success",duration:2e3})):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})})})},editSecretClass:function(){var e=this,t=n("mw3O"),a={secretClass:this.userInfo.secretClass},s=t.stringify(a);Object(i.l)(this.userInfo.id,s).then(function(t){0===t.data.code?(e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.getUserList(),e.editSecretClassDialog=!1):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3})})},handleSelectUser:function(e){this.selectedUserId=e.id},handleEnableSelect:function(e){e.edit=!0},handleSelectRole:function(e,t){var a=this,s=[];t.forEach(function(e){s.push(e.id)});var o={ids:(s+"").replace(/\[|]/g,"")},r=n("mw3O").stringify(o);Object(i.g)(e.id,r).then(function(t){0===t.data.code?(a.$notify({title:"成功",message:"角色修改成功",type:"success",duration:2e3}),a.getUserList()):(e.roleEntities=e.originRoleEntities,a.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3}))})}},computed:{userListA:function(){var e=this;return e.userList.filter(function(t){return-1!==t.username.toLowerCase().indexOf(e.searchQuery.toLowerCase())})},listenNowTabs:function(){return this.nowTabs},computedSecret:function(){return function(e){return 0===e?"公开":1===e?"内部":2===e?"秘密":3===e?"机密":4===e?"绝密":void 0}}},watch:{listenNowTabs:function(){}}}),r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"usermanageCont"},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",{attrs:{xs:24,sm:24,md:24}},[n("el-tabs",{attrs:{type:"border-card"},model:{value:e.nowTabs,callback:function(t){e.nowTabs=t},expression:"nowTabs"}},[n("el-tab-pane",[n("span",{attrs:{slot:"label"},slot:"label"},[n("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v(" 用户管理")],1),e._v(" "),n("div",{staticClass:"userboard"},[n("div",{staticClass:"filiter-box"},[n("div",{staticClass:"input-group"},[n("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",size:"small"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"input-group-button"},[n("svg-icon",{attrs:{"icon-class":"search"}})],1)],1)]),e._v(" "),e._l(e.userListA,function(t){return"admin"!==t.username&&"securityGuard"!==t.username&&"securityAuditor"!==t.username?n("div",{staticClass:"user-item"},[n("div",{staticClass:"editor-box"},[t.enabled?n("span",{staticClass:"editor-item editor-disable",on:{click:function(n){e.handleDisableUser(t)}}},[n("el-tooltip",{attrs:{content:"禁用用户",placement:"top"}},[n("svg-icon",{attrs:{"icon-class":"disable"}})],1)],1):e._e(),e._v(" "),t.enabled?e._e():n("span",{staticClass:"editor-item editor-enable",on:{click:function(n){e.handleEnableUser(t)}}},[n("el-tooltip",{attrs:{content:"解除禁用",placement:"top"}},[n("svg-icon",{attrs:{"icon-class":"enable"}})],1)],1)]),e._v(" "),n("div",{staticClass:"avatarCont"},[n("span",{staticClass:"user-avatar"},[n("svg-icon",{attrs:{"icon-class":!0===t.enabled?"user-1":"user-disable"}})],1)]),e._v(" "),n("div",{staticClass:"userMesCont"},[n("div",{staticClass:"userName"},[n("span",{staticClass:"username-title"},[e._v("用户名:")]),e._v(" "),n("span",{staticClass:"username-text"},[e._v(e._s(t.username))])]),e._v(" "),n("div",{staticClass:"userName"},[n("span",{staticClass:"username-title"},[e._v("姓名:")]),e._v(" "),n("span",{staticClass:"username-text"},[e._v(e._s(t.realName))])]),e._v(" "),n("div",{staticClass:"userSecret"},[n("span",{staticClass:"username-title"},[e._v("部门:")]),e._v(" "),n("span",{staticClass:"secret-text"},[e._v(e._s(t.department.name))])]),e._v(" "),n("div",{staticClass:"userSecret"},[n("span",{staticClass:"username-title"},[e._v("密级:")]),e._v(" "),n("span",{staticClass:"secret-text link-type",on:{click:function(n){e.handleEditSecretClass(t)}}},[e._v(e._s(e.computedSecret(t.secretClass)))])]),e._v(" "),n("div",{staticClass:"userMes"},[t.roleEntities?n("div",{staticClass:"user-role name"},[n("span",{staticClass:"role-text"},[e._v("角色:")]),e._v(" "),n("el-select",{staticClass:"role-select",staticStyle:{"margin-left":"52px",width:"calc(100% - 200px)","min-width":"300px"},attrs:{"value-key":"id",multiple:"",disabled:!0,placeholder:"请选择"},model:{value:t.roleEntities,callback:function(n){e.$set(t,"roleEntities",n)},expression:"item.roleEntities"}},e._l(t.roleEntities,function(e){return n("el-option",{key:e.id,attrs:{label:e.description,value:e}})}))],1):e._e()])])]):e._e()})],2)])],1)],1)],1),e._v(" "),n("el-dialog",{staticClass:"editDialog",attrs:{title:"修改用户密级",visible:e.editSecretClassDialog,width:"30%"},on:{"update:visible":function(t){e.editSecretClassDialog=t}}},[n("el-form",{attrs:{"label-position":"left","label-width":"80px",model:e.userInfo}},[n("el-form-item",{attrs:{label:"用户密级"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.userInfo.secretClass,callback:function(t){e.$set(e.userInfo,"secretClass",t)},expression:"userInfo.secretClass"}},e._l(e.secretOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editSecretClassDialog=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editSecretClass()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=n("VU/8")(o,r,!1,function(e){n("+lwl")},"data-v-582c669d",null);t.default=l.exports}});