webpackJsonp([49],{FDCN:function(e,t,a){var i=a("LlMj");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("24c6970d",i,!0)},LlMj:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.show-pwd[data-v-5cbfb542] {\n  position: absolute;\n  right: 10px;\n  top: 2px;\n  font-size: 16px;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.userManage-container[data-v-5cbfb542] {\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  background-color: #2d3a4b;\n}\n.userManage-container .login-form[data-v-5cbfb542] {\n    position: absolute;\n    left: 0;\n    right: 0;\n    width: 60%;\n    height: 100%;\n    padding: 0px 35px 15px 35px;\n    margin: 10px auto;\n}\n.userManage-container .svg-container[data-v-5cbfb542] {\n    padding: 6px 5px 6px 15px;\n    color: #889aa4;\n    vertical-align: middle;\n    width: 30px;\n    display: inline-block;\n}\n.userManage-container .svg-container_login[data-v-5cbfb542], .userManage-container .svg-container_ip[data-v-5cbfb542] {\n      font-size: 20px;\n}\n.userManage-container .title-container[data-v-5cbfb542] {\n    position: relative;\n}\n.userManage-container .title-container .title[data-v-5cbfb542] {\n      font-size: 26px;\n      font-weight: 400;\n      color: #eee;\n      margin: 0px auto 40px auto;\n      text-align: center;\n      font-weight: bold;\n}\n.userManage-container .title-container .set-language[data-v-5cbfb542] {\n      color: #fff;\n      position: absolute;\n      top: 5px;\n      right: 0px;\n}\n.right-menu[data-v-5cbfb542] {\n  float: right;\n  height: 100%;\n}\n.right-menu[data-v-5cbfb542]:focus {\n    outline: none;\n}\n.right-menu .right-menu-item[data-v-5cbfb542] {\n    display: inline-block;\n    margin: 0 8px;\n}\n.right-menu .avatar-container[data-v-5cbfb542] {\n    height: 50px;\n    margin-right: 30px;\n}\n.right-menu .avatar-container .avatar-wrapper[data-v-5cbfb542] {\n      cursor: pointer;\n      margin-top: 5px;\n      position: relative;\n}\n.right-menu .avatar-container .avatar-wrapper .user-avatar[data-v-5cbfb542] {\n        width: 40px;\n        height: 40px;\n        border-radius: 10px;\n}\n.right-menu .avatar-container .avatar-wrapper .el-icon-caret-bottom[data-v-5cbfb542] {\n        position: absolute;\n        right: -20px;\n        top: 25px;\n        font-size: 12px;\n}\n",""])},MTEN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kCe2"),n=a("E4LH"),o=a("/t6J"),r=a("IcnI"),s={components:{PanThumb:i.a},name:"login",data:function(){var e=this,t=function(t,a,i){Object(n.a)(a)?(i(),e.passwordValidate=!0,e.passwordValidate&&e.pasAgainValidate&&(e.btnConfirm=!1)):(i(new Error("密码必须是6-16位数字和字母的组合！")),e.btnConfirm=!0,e.passwordValidate=!1)};return{userName:"",selectedId:"",selectedRoleId:"",tableKey:0,list:[],listQuery:{page:0,size:10,limit:5,tagname:""},total:null,pagesize:10,currentPage:1,dialogFormVisible:!1,createUserFormVisible:!1,createRoleFormVisible:!1,modifyPasswordVisible:!1,addLoading:!1,modLoading:!1,delLoading:!1,passwordType:"password",passwordTypeAgain:"password",btnConfirm:!1,passwordValidate:!1,pasAgainValidate:!1,formLabelWidth:"100px",searchQuery:"",temp:{id:"",name:"",description:""},form:{passwordAgain:"",passwordNew:""},createForm:{username:"",password:"",passwordAgain:""},roleForm:{roleName:""},editRoleform:{roleName:""},rules:{username:[{required:!0,trigger:"blur",validator:function(e,t,a){Object(n.b)(t)?a():a(new Error("请输入用户名！"))}}],password:[{required:!0,trigger:"blur",validator:t}],passwordAgain:[{required:!0,trigger:"blur",validator:function(t,a,i){Object(n.a)(a)?e.createForm.passwordAgain!==e.createForm.password?(e.btnConfirm=!0,e.pasAgainValidate=!1,i(new Error("两次密码输入不一致，请再次输入新密码！"))):(i(),e.pasAgainValidate=!0,e.passwordValidate&&e.pasAgainValidate&&(e.btnConfirm=!1)):(i(new Error("密码必须是6-16位数字和字母的组合！")),e.btnConfirm=!0,e.pasAgainValidate=!1)}}]},modifyRules:{passwordNew:[{required:!0,trigger:"blur",validator:t}],passwordAgain:[{required:!0,trigger:"blur",validator:function(t,a,i){a.length<6?(i(new Error("请输入正确的密码,至少六位！")),e.btnConfirm=!0,e.pasAgainValidate=!1):e.form.passwordAgain!==e.form.passwordNew?(e.btnConfirm=!0,e.pasAgainValidate=!1,i(new Error("两次密码输入不一致，请再次输入新密码！"))):(i(),e.pasAgainValidate=!0,e.passwordValidate&&e.pasAgainValidate&&(e.btnConfirm=!1))}}]},loading:!1,listLoading:!0,showDialog:!1,userData:{username:"",password:""},token:"",role:""}},created:function(){this.userName=this.getCookie("username"),this.role=r.a.getters.roles,this.getList()},methods:{showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},showPwdAgain:function(){"password"===this.passwordTypeAgain?this.passwordTypeAgain="":this.passwordTypeAgain="password"},logout:function(){this.$store.dispatch("FedLogOut").then(function(){location.reload()})},resetCreate:function(){this.createForm={username:"",password:"",passwordAgain:""}},resetModify:function(){this.form={passwordAgain:"",passwordNew:""}},getList:function(){var e=this;this.listLoading=!0,"admin"==this.role&&Object(o.c)(this.listQuery).then(function(t){0===t.data.code&&(e.list=t.data.data,e.listLoading=!1)})},handleCreate:function(){var e=this;this.resetCreate(),this.createUserFormVisible=!0,this.$nextTick(function(){e.$refs.createDataForm.clearValidate()})},createUser:function(){var e=this;this.$refs.createDataForm.validate(function(t){if(t){e.addLoading=!0;a("mw3O");var i={username:e.createForm.username,password:e.createForm.password};addUser(i).then(function(t){e.addLoading=!1,0===t.data.code?(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.getList(),e.createUserFormVisible=!1):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3})})}})},resetCreateRole:function(){this.roleForm={roleName:""}},handleCreateRole:function(){var e=this;this.resetCreateRole(),this.createRoleFormVisible=!0,this.$nextTick(function(){e.$refs.createRoleForm.clearValidate()})},createRole:function(){var e=this;this.$refs.createRoleForm.validate(function(t){if(t){e.addLoading=!0;a("mw3O");var i={name:e.roleForm.roleName};Object(o.a)(i).then(function(t){e.addLoading=!1,0===t.data.code?(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.getList(),e.createRoleFormVisible=!1):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3})})}})},handleUpdateRole:function(e){var t=this;this.resetModify(),this.selectedRoleId=e.id,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.modifyRoleForm.clearValidate()})},updateUserRole:function(){var e=this;this.$refs.modifyRoleForm.validate(function(t){if(t){var i={name:e.editRoleform.roleName},n=e.selectedRoleId,r=a("mw3O").stringify(i);Object(o.d)(r,n).then(function(t){e.modLoading=!1,e.dialogFormVisible=!1,0===t.data.code?(e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.getList()):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3})})}})},updateUser:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;this.$refs.modifyDataForm.validate(function(t){if(t){e.modLoading=!0;var i={username:e.form.passwordNew},n=e.selectedId,o=a("mw3O").stringify(i);updateUser(o,n).then(function(t){e.modLoading=!1,e.dialogFormVisible=!1,0===t.data.code?(e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.getList()):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:2e3})})}})}),handleDeleteRole:function(e){var t=this,a=e.id;e.delLoading=!0,this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.b)(a).then(function(a){e.delLoading=!1,0===a.data.code?(t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getList()):t.$notify({title:"失败",message:"删除失败",type:"error",duration:2e3})})}).catch(function(){e.delLoading=!1,t.$message({type:"info",message:"已取消删除"})})},handleDisable:function(e){var t=this,i=e.id;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=a("mw3O").stringify({enabled:!1});disableUser(i,n).then(function(a){e.delLoading=!1,0===a.data.code?(t.$notify({title:"成功",message:"禁用成功",type:"success",duration:2e3}),t.getList()):t.$notify({title:"失败",message:"禁用失败",type:"error",duration:2e3})})}).catch(function(){e.delLoading=!1,t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.listQuery.size=e,this.pagesize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e-1,this.currentPage=e,this.getList()}},computed:{listA:function(){var e=this;return e.list.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.searchQuery.toLowerCase())})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManage-container"},[a("el-header",[a("div",{staticClass:"right-menu"},[a("span",{staticStyle:{position:"relative",top:"-12px",color:"#fff"},attrs:{calss:"userName"}},[e._v(e._s(e.userName))]),e._v(" "),a("el-dropdown",{staticClass:"avatar-container right-menu-item",attrs:{trigger:"click"}},[a("div",{staticClass:"avatar-wrapper"},[a("pan-thumb",{staticClass:"proImg",attrs:{width:"40px",height:"40px",image:"./2/jpg"}}),e._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:"/projectManage"}},[a("el-dropdown-item",[a("span",{staticStyle:{display:"block"}},[e._v("项目管理")])])],1),e._v(" "),a("el-dropdown-item",{attrs:{divided:""}},[a("span",{staticStyle:{display:"block"},on:{click:e.logout}},[e._v(e._s(e.$t("navbar.logOut")))])])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"login-form"},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[e._v("\n        角色管理\n      ")]),e._v(" "),a("div",[a("div",{staticClass:"searchContainer",staticStyle:{display:"inline-block","margin-bottom":"16px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-top":"2px"},attrs:{size:"mini",type:"success"},on:{click:e.handleCreateRole}},[e._v("添加\n        ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%","border-radius":"8px"},attrs:{data:e.listA,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":"",height:"65%"}},[a("el-table-column",{attrs:{"min-width":"150px",label:"角色名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type",on:{click:function(a){e.handleUpdate(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:e.$t("table.actions"),"min-width":"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleUpdateRole(t.row)}}},[e._v(e._s(e.$t("table.edit")))]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleDeleteRole(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:this.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改角色",visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"modifyRoleForm",staticStyle:{width:"80%",margin:"0 auto"},attrs:{rules:e.modifyRules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新角色名"}},[a("el-input",{model:{value:e.editRoleform.roleName,callback:function(t){e.$set(e.editRoleform,"roleName",t)},expression:"editRoleform.roleName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),a("el-button",{attrs:{disabled:this.btnConfirm,type:"primary"},on:{click:e.updateUserRole}},[e._v(e._s(e.$t("table.confirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户角色",visible:e.createRoleFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.createRoleFormVisible=t}}},[a("el-form",{ref:"createRoleForm",staticStyle:{width:"400px",margin:"0 auto"},attrs:{rules:e.rules,model:e.createForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户角色名",prop:"roleName"}},[a("el-input",{attrs:{type:"text"},model:{value:e.roleForm.roleName,callback:function(t){e.$set(e.roleForm,"roleName",t)},expression:"roleForm.roleName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createRoleFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))]),e._v(" "),a("el-button",{attrs:{disabled:this.btnConfirm,type:"primary",loading:e.addLoading},on:{click:e.createRole}},[e._v(e._s(e.$t("table.confirm")))])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(s,l,!1,function(e){a("FDCN")},"data-v-5cbfb542",null);t.default=d.exports}});