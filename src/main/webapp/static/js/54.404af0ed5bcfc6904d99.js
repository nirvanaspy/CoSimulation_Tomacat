webpackJsonp([54],{"8TEt":function(n,t,e){var i=e("KsND");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("49113eb4",i,!0)},KsND:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},XXQ3:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("I1uT"),o={name:"index",data:function(){return{projectId:"",componentId:"",compName:"",parentNodeId:"",newFolderName:"",uploadDialog:!1,fileList:[],breadcrumbList:[],tableKey:0,list:[],singleComp:null,total:null,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id",deviceName:void 0},sortable:null,oldList:[],newList:[],temp:{id:"",name:"",version:"",deployPath:"",description:"",fileAll:""},downloadLoading:!1,options:{chunkSize:1048576,testChunks:!0},attrs:{accept:"image/*"},statusText:{success:"成功了",error:"出错了",uploading:"上传中",paused:"暂停中",waiting:"等待中"},started:!1,autoStart:"",fileInfo:[],folderInfo:[],files:[],folderClearData:[],fileClearData:[],fileAll:[],searchQuery:"",CheckedComps:[]}},created:function(){this.projectId=this.$store.getters.projectId,this.componentId=this.$route.params.id,this.compName=this.$route.params.name,this.breadcrumbList=[],this.breadcrumbList.push({name:this.compName,componentId:this.componentId,parentNodeId:"",folder:!0}),console.log(this.breadcrumbList),this.getList(),this.autoStart=!1},methods:{getList:function(){var n=this;this.listLoading=!0,Object(i.e)(this.componentId,this.parentNodeId).then(function(t){n.list=t.data.data,n.listLoading=!1})},loadListFile:function(n){var t=this;n.folder&&(this.parentNodeId=n.id,this.listLoading=!0,Object(i.e)(this.componentId,this.parentNodeId).then(function(e){t.listLoading=!1,t.list=e.data.data,t.breadcrumbList.push({name:n.name,componentId:t.componentId,parentNodeId:n.id,folder:!0}),console.log(t.breadcrumbList)}))},addFolder:function(){this.list.splice(0,0,{name:"",newFolder:!0}),this.$nextTick(function(){})},newFoler:function(){var n=this;Object(i.l)(this.componentId,this.parentNodeId).then(function(){n.newFolderName="",n.getList()}).catch(function(){n.newFolderName=""})},handleuploadFile:function(){this.uploadDialog=!0},uploadFile:function(){var n=this;this.listLoading=!0;var t=new FormData;t.append("parentnodeid",this.parentNodeId),this.fileAll=this.$refs.uploader.uploader.files;for(var e=0;e<this.fileAll.length;e++)t.append("files",this.fileAll[e].file);Object(i.k)(this.componentId,t).then(function(t){n.getList(),n.listLoading=!1,n.uploadDialog=!1})},switchFolder:function(n,t){var e=this;n.folder&&(this.listLoading=!0,this.parentNodeId=n.parentNodeId,Object(i.e)(this.componentId,this.parentNodeId).then(function(n){e.listLoading=!1,e.list=n.data.data,e.breadcrumbList.splice(t+1,e.breadcrumbList.length-t-1)}).catch(function(){e.listLoading=!1}))}},computed:{classifyIcon:function(){return function(n){return n.type?"png"===n.type||"jpg"===n.type||"gif"===n.type?"image":"rar"===n.type||"zip"===n.type?"compressed":"file":"folder"}}}},a={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"app-container calendar-list-container"},[e("div",{staticClass:"operationContainer",staticStyle:{height:"40px","border-bottom":"1px solid #ebeef5"}},[e("div",{staticStyle:{float:"left"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},n._l(n.breadcrumbList,function(t,i){return e("el-breadcrumb-item",{key:i},[e("span",{on:{click:function(e){n.switchFolder(t,i)}}},[n._v(n._s(t.name))])])}))],1),n._v(" "),e("div",{staticStyle:{float:"right",color:"rgb(0, 171, 235)",cursor:"pointer"}},[e("span",{staticStyle:{"margin-right":"18px"},on:{click:n.addFolder}},[e("svg-icon",{attrs:{"icon-class":"add"}}),n._v(" "),e("span",{staticStyle:{"font-size":"14px","margin-left":"6px"}},[n._v("新建文件夹")])],1),n._v(" "),e("span",{on:{click:n.handleuploadFile}},[e("svg-icon",{attrs:{"icon-class":"upload1"}}),n._v(" "),e("span",{staticStyle:{"font-size":"14px","margin-left":"6px"}},[n._v("上传文件")])],1)])]),n._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}],key:n.tableKey,staticClass:"fileList",staticStyle:{width:"100%"},attrs:{data:n.list,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{label:n.$t("table.compName"),width:"200"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[e("svg-icon",{staticStyle:{"font-size":"30px","margin-right":"10px"},attrs:{"icon-class":n.classifyIcon(t.row)}}),n._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.name,placement:"top"}},[t.row.newFolder?n._e():e("span",{staticClass:"link-type",staticStyle:{position:"relative",top:"2px",display:"inline-block",width:"70%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},on:{click:function(e){n.loadListFile(t.row)}}},[n._v("\n              "+n._s(t.row.name)+"\n            ")])]),n._v(" "),t.row.newFolder?e("el-input",{ref:"newFolderInput",staticStyle:{width:"70%",display:"inline-block",position:"relative",top:"-2px"},attrs:{autofocus:"autofocus",placeholder:"按enter确定"},nativeOn:{keyup:function(t){if(!("button"in t)&&n._k(t.keyCode,"enter",13,t.key))return null;n.newFoler(t)}},model:{value:n.newFolderName,callback:function(t){n.newFolderName=t},expression:"newFolderName"}}):n._e()],1)]}}])}),n._v(" "),e("el-table-column",{attrs:{"min-width":"150px",label:n.$t("table.compSize")},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.size))])]}}])}),n._v(" "),e("el-table-column",{attrs:{"min-width":"150px",label:"创建时间"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.createTime))])]}}])})],1),n._v(" "),e("el-dialog",{staticClass:"uploadDialog",attrs:{title:"提示",visible:n.uploadDialog,width:"30%"},on:{"update:visible":function(t){n.uploadDialog=t}}},[e("uploader",{ref:"uploader",staticClass:"uploader-example",attrs:{options:n.options,autoStart:n.autoStart,"file-status-text":n.statusText,started:n.started}},[e("uploader-unsupport"),n._v(" "),e("uploader-drop",[e("p",[n._v("拖拽文件到此处或")]),n._v(" "),e("uploader-btn",[n._v("选择文件")])],1),n._v(" "),e("uploader-list",{ref:"uploaderList"})],1),n._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){n.uploadDialog=!1}}},[n._v("取 消")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:n.uploadFile}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(o,a,!1,function(n){e("8TEt")},"data-v-40587428",null);t.default=l.exports}});