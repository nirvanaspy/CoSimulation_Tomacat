webpackJsonp([8,39],{"1dE+":function(t,e,n){var i=n("81nH");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("fb937c66",i,!0)},"43Ol":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.proTitle[data-v-73dc5325] {\n  position: absolute;\n  width: 140px;\n  top: 0;\n  left: 50%;\n  margin-left: -70px;\n  background: -webkit-gradient(linear, left top, right top, from(#5786e8), to(#2961d2));\n  background: linear-gradient(to right, #5786e8, #2961d2);\n  -webkit-background-clip: text;\n  color: transparent;\n}\n.icon-search[data-v-73dc5325] {\n  position: absolute;\n  top: 1px;\n  left: 30px;\n  z-index: 99;\n}\n.right-menu[data-v-73dc5325] {\n  float: right;\n  height: 100%;\n}\n.right-menu[data-v-73dc5325]:focus {\n    outline: none;\n}\n.right-menu .right-menu-item[data-v-73dc5325] {\n    display: inline-block;\n    margin: 0 8px;\n}\n.right-menu .avatar-container[data-v-73dc5325] {\n    height: 50px;\n    margin-right: 30px;\n}\n.right-menu .avatar-container .avatar-wrapper[data-v-73dc5325] {\n      cursor: pointer;\n      margin-top: 5px;\n      position: relative;\n}\n.right-menu .avatar-container .avatar-wrapper .user-avatar[data-v-73dc5325] {\n        width: 40px;\n        height: 40px;\n        border-radius: 10px;\n}\n.right-menu .avatar-container .avatar-wrapper .el-icon-caret-bottom[data-v-73dc5325] {\n        position: absolute;\n        right: -20px;\n        top: 25px;\n        font-size: 12px;\n}\n.board[data-v-73dc5325] {\n  width: 1000px;\n  margin-left: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  margin-top: 10px;\n}\n",""])},"6bnK":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.board-column[data-v-6f731504] {\n  min-width: 300px;\n  min-height: 100px;\n  height: auto;\n  overflow: hidden;\n  background: #f0f0f0;\n  border-radius: 3px;\n}\n.board-column .board-column-header[data-v-6f731504] {\n    height: 36px;\n    line-height: 36px;\n    overflow: hidden;\n    padding: 0 20px;\n    text-align: left;\n    background: #333;\n    color: #fff;\n    border-radius: 3px 3px 0 0;\n    font-size: 14px;\n}\n.board-column .board-column-content[data-v-6f731504] {\n    background: #f5f6f7;\n    height: auto;\n    overflow: hidden;\n    border: 10px solid transparent;\n    min-height: 60px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.board-column .board-column-content .board-item[data-v-6f731504] {\n      position: relative;\n      cursor: pointer;\n      width: 100%;\n      height: 64px;\n      margin: 5px 0;\n      background-color: #fff;\n      text-align: left;\n      border-radius: 4px;\n      padding: 5px 14px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n      -webkit-box-shadow: 0px 1px 3px 0 rgba(0, 0, 0, 0.2);\n              box-shadow: 0px 1px 3px 0 rgba(0, 0, 0, 0.2);\n      font-size: 13px;\n      color: #333;\n}\n.board-column .board-column-content .tag-box-mine[data-v-6f731504] {\n      width: 100%;\n      height: 40px;\n      line-height: 40px;\n}\n.board-column .board-column-content .status-box[data-v-6f731504] {\n      float: right;\n      display: inline-block;\n      width: 75px;\n      text-align: center;\n      background: #ff4f3e;\n      height: 20px;\n      line-height: 20px;\n      font-size: 12px;\n      color: #fff;\n      border-radius: 3px;\n      margin-top: 10px;\n      margin-right: 0;\n}\n.board-column .board-column-content .tag-box[data-v-6f731504] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      display: inline-block;\n      height: 100%;\n      width: 2px;\n      background: #f9944a;\n}\n.board-column .board-column-content .board-item:hover .tag-box[data-v-6f731504] {\n      width: 4px;\n}\n.board-column .add-item[data-v-6f731504] {\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    background: #fff;\n    color: #ccc;\n    font-weight: 700;\n    font-size: 26px;\n    cursor: pointer;\n}\n.img-container[data-v-6f731504] {\n  width: 100%;\n  height: 140px;\n  margin: 0 auto;\n  background: url("+n("SzTq")+") center center no-repeat;\n  background-size: 113px 90px;\n}\n.text-container[data-v-6f731504] {\n  text-align: center;\n  color: #777;\n  margin-bottom: 20px;\n  font-size: 14px;\n  font-weight: 500;\n}\n",""])},"81nH":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.hide[data-v-af0c023a] {\n  display: none;\n}\n",""])},DAYN:function(t,e,n){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function(){function e(t){function e(t){t.parentElement.removeChild(t)}function n(t,e,n){var i=0===n?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,i)}function a(t,e){var n=this;this.$nextTick(function(){return n.$emit(t.toLowerCase(),e)})}var r=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(r,s).map(function(t){return"on"+t}),d=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null}},data:function(){return{transitionMode:!1,componentMode:!1}},render:function(t){var e=this.$slots.default;if(e&&1===e.length){var n=e[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var i=e,a=this.$slots.footer;return a&&(i=e?[].concat(o(e),o(a)):[].concat(o(a))),t(this.element,null,i)},mounted:function(){var e=this;if(this.componentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.componentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var n={};r.forEach(function(t){n["on"+t]=function(t){var e=this;return function(n){null!==e.realList&&e["onDrag"+t](n),a.call(e,t,n)}}.call(e,t)}),s.forEach(function(t){n["on"+t]=a.bind(e,t)});var o=i({},this.options,n,{onMove:function(t,n){return e.onDragMove(t,n)}});!("draggable"in o)&&(o.draggable=">*"),this._sortable=new t(this.rootContainer,o),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==l.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.componentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=function(t,e,n){if(!t)return[];var i=t.map(function(t){return t.elm}),a=[].concat(o(e)).map(function(t){return i.indexOf(t)});return n?a.filter(function(t){return-1!==t}):a}(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=function(t,e){return t.map(function(t){return t.elm}).indexOf(e)}(this.getChildrenNodes()||[],t);return-1===e?null:{index:e,element:this.realList[e]}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(o(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var n=function(n){return n.splice(e,0,n.splice(t,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(t){var e=t.to,n=t.related,o=this.getUnderlyingPotencialDraggableComponent(e);if(!o)return{component:o};var a=o.realList,r={list:a,component:o};if(e!==n&&a&&o.getUnderlyingVm){var s=o.getUnderlyingVm(n);if(s)return i(s,r)}return r},getVmIndex:function(t){var e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),d=t.item},onDragAdd:function(t){var n=t.item._underlying_vm_;if(void 0!==n){e(t.item);var i=this.getVmIndex(t.newIndex);this.spliceList(i,0,n),this.computeIndexes();var o={element:n,newIndex:i};this.emitChanges({added:o})}},onDragRemove:function(t){if(n(this.rootContainer,t.item,t.oldIndex),this.isCloning)e(t.clone);else{var i=this.context.index;this.spliceList(i,1);var o={element:this.context.element,oldIndex:i};this.resetTransitionData(i),this.emitChanges({removed:o})}},onDragUpdate:function(t){e(t.item),n(t.from,t.item,t.oldIndex);var i=this.context.index,o=this.getVmIndex(t.newIndex);this.updatePosition(i,o);var a={element:this.context.element,oldIndex:i,newIndex:o};this.emitChanges({moved:a})},computeFutureIndex:function(t,e){if(!t.element)return 0;var n=[].concat(o(e.to.children)).filter(function(t){return"none"!==t.style.display}),i=n.indexOf(e.related),a=t.component.getVmIndex(i);return-1!=n.indexOf(d)||!e.willInsertAfter?a:a+1},onDragMove:function(t,e){var n=this.move;if(!n||!this.realList)return!0;var o=this.getRelatedContextFromMoveEvent(t),a=this.context,r=this.computeFutureIndex(o,t);return i(a,{futureIndex:r}),i(t,{relatedContext:o,draggedContext:a}),n(t,e)},onDragEnd:function(t){this.computeIndexes(),d=null}}}}Array.from||(Array.from=function(t){return[].slice.call(t)});var a=n("Lokx");t.exports=e(a)}()},Lokx:function(t,e,n){var i,o;!function(a){"use strict";void 0===(o="function"==typeof(i=a)?i.call(e,n,e,t):i)||(t.exports=o)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,n,i,o,a,r,s,l,d,c,u,p,h,f,g,m,v,b,k,y,x={},S=/\s+/g,w=/left|right|inline/,_="Sortable"+(new Date).getTime(),D=window,T=D.document,C=D.parseInt,I=D.setTimeout,L=D.jQuery||D.Zepto,P=D.Polymer,N=!1,z="draggable"in T.createElement("div"),A=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((y=T.createElement("x")).style.cssText="pointer-events:auto","auto"===y.style.pointerEvents),O=!1,E=Math.abs,M=Math.min,$=[],B=[],F=it(function(t,e,n){if(n&&e.scroll){var i,o,a,r,c,u,p=n[_],h=e.scrollSensitivity,f=e.scrollSpeed,g=t.clientX,m=t.clientY,v=window.innerWidth,b=window.innerHeight;if(l!==n&&(s=e.scroll,l=n,d=e.scrollFn,!0===s)){s=n;do{if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break}while(s=s.parentNode)}s&&(i=s,o=s.getBoundingClientRect(),a=(E(o.right-g)<=h)-(E(o.left-g)<=h),r=(E(o.bottom-m)<=h)-(E(o.top-m)<=h)),a||r||(r=(b-m<=h)-(m<=h),((a=(v-g<=h)-(g<=h))||r)&&(i=D)),x.vx===a&&x.vy===r&&x.el===i||(x.el=i,x.vx=a,x.vy=r,clearInterval(x.pid),i&&(x.pid=setInterval(function(){if(u=r?r*f:0,c=a?a*f:0,"function"==typeof d)return d.call(p,c,u,t);i===D?D.scrollTo(D.pageXOffset+c,D.pageYOffset+u):(i.scrollTop+=u,i.scrollLeft+=c)},24)))}},30),j=function(t){function e(t,e){return void 0!==t&&!0!==t||(t=n.name),"function"==typeof t?t:function(n,i){var o=i.options.group.name;return e?t:t&&(t.join?t.indexOf(o)>-1:o==t)}}var n={},i=t.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){N={capture:!1,passive:!1}}}))}catch(t){}function R(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=ot({},e),t[_]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==R.supportPointer};for(var i in n)!(i in e)&&(e[i]=n[i]);for(var o in j(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&z,Y(t,"mousedown",this._onTapStart),Y(t,"touchstart",this._onTapStart),e.supportPointer&&Y(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(t,"dragover",this),Y(t,"dragenter",this)),B.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function V(e,n){"clone"!==e.lastPullMode&&(n=!0),i&&i.state!==n&&(H(i,"display",n?"none":""),n||i.state&&(e.options.group.revertClone?(o.insertBefore(i,a),e._animate(t,i)):o.insertBefore(i,t)),i.state=n)}function U(t,e,n){if(t){n=n||T;do{if(">*"===e&&t.parentNode===n||nt(t,e))return t}while(t=W(t))}return null}function W(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function Y(t,e,n){t.addEventListener(e,n,N)}function X(t,e,n){t.removeEventListener(e,n,N)}function G(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(S," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(S," ")}}function H(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return T.defaultView&&T.defaultView.getComputedStyle?n=T.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function q(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,a=i.length;if(n)for(;o<a;o++)n(i[o],o);return i}return[]}function K(t,e,n,o,a,r,s,l){t=t||e[_];var d=T.createEvent("Event"),c=t.options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);d.initEvent(n,!0,!0),d.to=a||e,d.from=r||e,d.item=o||e,d.clone=i,d.oldIndex=s,d.newIndex=l,e.dispatchEvent(d),c[u]&&c[u].call(t,d)}function J(t,e,n,i,o,a,r,s){var l,d,c=t[_],u=c.options.onMove;return(l=T.createEvent("Event")).initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=o||e,l.relatedRect=a||e.getBoundingClientRect(),l.willInsertAfter=s,t.dispatchEvent(l),u&&(d=u.call(c,l,r)),d}function Q(t){t.draggable=!1}function Z(){O=!1}function tt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function et(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!nt(t,e)||n++;return n}function nt(t,e){if(t){var n=(e=e.split(".")).shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==n&&t.nodeName.toUpperCase()!=n||e.length&&((" "+t.className+" ").match(i)||[]).length!=e.length)}return!1}function it(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,I(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function ot(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function at(t){return P&&P.dom?P.dom(t).cloneNode(!0):L?L(t).clone(!0)[0]:t.cloneNode(!0)}function rt(t){return I(t,0)}function st(t){return clearTimeout(t)}return R.prototype={constructor:R,_onTapStart:function(e){var n,i=this,o=this.el,a=this.options,s=a.preventOnFilter,l=e.type,d=e.touches&&e.touches[0],c=(d||e).target,u=e.target.shadowRoot&&e.path&&e.path[0]||c,p=a.filter;if(function(t){var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&$.push(i)}}(o),!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||a.disabled)&&!u.isContentEditable&&(c=U(c,a.draggable,o))&&r!==c){if(n=et(c,a.draggable),"function"==typeof p){if(p.call(this,e,c,this))return K(i,u,"filter",c,o,o,n),void(s&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(t){if(t=U(u,t.trim(),o))return K(i,t,"filter",c,o,o,n),!0})))return void(s&&e.preventDefault());a.handle&&!U(u,a.handle,o)||this._prepareDragStart(e,d,c,n)}},_prepareDragStart:function(n,i,s,l){var d,c=this,u=c.el,p=c.options,f=u.ownerDocument;s&&!t&&s.parentNode===u&&(v=n,o=u,e=(t=s).parentNode,a=t.nextSibling,r=s,g=p.group,h=l,this._lastX=(i||n).clientX,this._lastY=(i||n).clientY,t.style["will-change"]="all",d=function(){c._disableDelayedDrag(),t.draggable=c.nativeDraggable,G(t,p.chosenClass,!0),c._triggerDragStart(n,i),K(c,o,"choose",t,o,o,h)},p.ignore.split(",").forEach(function(e){q(t,e.trim(),Q)}),Y(f,"mouseup",c._onDrop),Y(f,"touchend",c._onDrop),Y(f,"touchcancel",c._onDrop),Y(f,"selectstart",c),p.supportPointer&&Y(f,"pointercancel",c._onDrop),p.delay?(Y(f,"mouseup",c._disableDelayedDrag),Y(f,"touchend",c._disableDelayedDrag),Y(f,"touchcancel",c._disableDelayedDrag),Y(f,"mousemove",c._disableDelayedDrag),Y(f,"touchmove",c._disableDelayedDrag),p.supportPointer&&Y(f,"pointermove",c._disableDelayedDrag),c._dragStartTimer=I(d,p.delay)):d())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),X(t,"mouseup",this._disableDelayedDrag),X(t,"touchend",this._disableDelayedDrag),X(t,"touchcancel",this._disableDelayedDrag),X(t,"mousemove",this._disableDelayedDrag),X(t,"touchmove",this._disableDelayedDrag),X(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,n){(n=n||("touch"==e.pointerType?e:null))?(v={target:t,clientX:n.clientX,clientY:n.clientY},this._onDragStart(v,"touch")):this.nativeDraggable?(Y(t,"dragend",this),Y(o,"dragstart",this._onDragStart)):this._onDragStart(v,!0);try{T.selection?rt(function(){T.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){if(o&&t){var e=this.options;G(t,e.ghostClass,!0),G(t,e.dragClass,!1),R.active=this,K(this,o,"start",t,o,o,h)}else this._nulling()},_emulateDragOver:function(){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY)return;this._lastX=b.clientX,this._lastY=b.clientY,A||H(n,"display","none");var t=T.elementFromPoint(b.clientX,b.clientY),e=t,i=B.length;if(t&&t.shadowRoot&&(e=t=t.shadowRoot.elementFromPoint(b.clientX,b.clientY)),e)do{if(e[_]){for(;i--;)B[i]({clientX:b.clientX,clientY:b.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);A||H(n,"display","")}},_onTouchMove:function(t){if(v){var e=this.options,i=e.fallbackTolerance,o=e.fallbackOffset,a=t.touches?t.touches[0]:t,r=a.clientX-v.clientX+o.x,s=a.clientY-v.clientY+o.y,l=t.touches?"translate3d("+r+"px,"+s+"px,0)":"translate("+r+"px,"+s+"px)";if(!R.active){if(i&&M(E(a.clientX-this._lastX),E(a.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),k=!0,b=a,H(n,"webkitTransform",l),H(n,"mozTransform",l),H(n,"msTransform",l),H(n,"transform",l),t.preventDefault()}},_appendGhost:function(){if(!n){var e,i=t.getBoundingClientRect(),a=H(t),r=this.options;G(n=t.cloneNode(!0),r.ghostClass,!1),G(n,r.fallbackClass,!0),G(n,r.dragClass,!0),H(n,"top",i.top-C(a.marginTop,10)),H(n,"left",i.left-C(a.marginLeft,10)),H(n,"width",i.width),H(n,"height",i.height),H(n,"opacity","0.8"),H(n,"position","fixed"),H(n,"zIndex","100000"),H(n,"pointerEvents","none"),r.fallbackOnBody&&T.body.appendChild(n)||o.appendChild(n),e=n.getBoundingClientRect(),H(n,"width",2*i.width-e.width),H(n,"height",2*i.height-e.height)}},_onDragStart:function(e,n){var a=this,r=e.dataTransfer,s=a.options;a._offUpEvents(),g.checkPull(a,a,t,e)&&((i=at(t)).draggable=!1,i.style["will-change"]="",H(i,"display","none"),G(i,a.options.chosenClass,!1),a._cloneId=rt(function(){o.insertBefore(i,t),K(a,o,"clone",t)})),G(t,s.dragClass,!0),n?("touch"===n?(Y(T,"touchmove",a._onTouchMove),Y(T,"touchend",a._onDrop),Y(T,"touchcancel",a._onDrop),s.supportPointer&&(Y(T,"pointermove",a._onTouchMove),Y(T,"pointerup",a._onDrop))):(Y(T,"mousemove",a._onTouchMove),Y(T,"mouseup",a._onDrop)),a._loopId=setInterval(a._emulateDragOver,50)):(r&&(r.effectAllowed="move",s.setData&&s.setData.call(a,r,t)),Y(T,"drop",a),a._dragStartId=rt(a._dragStarted))},_onDragOver:function(r){var s,l,d,h,f=this.el,v=this.options,b=v.group,y=R.active,x=g===b,S=!1,D=v.sort;if(void 0!==r.preventDefault&&(r.preventDefault(),!v.dragoverBubble&&r.stopPropagation()),!t.animated&&(k=!0,y&&!v.disabled&&(x?D||(h=!o.contains(t)):m===this||(y.lastPullMode=g.checkPull(this,y,t,r))&&b.checkPut(this,y,t,r))&&(void 0===r.rootEl||r.rootEl===this.el))){if(F(r,v,this.el),O)return;if(s=U(r.target,v.draggable,f),l=t.getBoundingClientRect(),m!==this&&(m=this,S=!0),h)return V(y,!0),e=o,void(i||a?o.insertBefore(t,i||a):D||o.appendChild(t));if(0===f.children.length||f.children[0]===n||f===r.target&&function(t,e){var n=t.lastElementChild.getBoundingClientRect();return e.clientY-(n.top+n.height)>5||e.clientX-(n.left+n.width)>5}(f,r)){if(0!==f.children.length&&f.children[0]!==n&&f===r.target&&(s=f.lastElementChild),s){if(s.animated)return;d=s.getBoundingClientRect()}V(y,x),!1!==J(o,f,t,l,s,d,r)&&(t.contains(f)||(f.appendChild(t),e=f),this._animate(l,t),s&&this._animate(d,s))}else if(s&&!s.animated&&s!==t&&void 0!==s.parentNode[_]){c!==s&&(c=s,u=H(s),p=H(s.parentNode));var T=(d=s.getBoundingClientRect()).right-d.left,C=d.bottom-d.top,L=w.test(u.cssFloat+u.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),P=s.offsetWidth>t.offsetWidth,N=s.offsetHeight>t.offsetHeight,z=(L?(r.clientX-d.left)/T:(r.clientY-d.top)/C)>.5,A=s.nextElementSibling,E=!1;if(L){var M=t.offsetTop,$=s.offsetTop;E=M===$?s.previousElementSibling===t&&!P||z&&P:s.previousElementSibling===t||t.previousElementSibling===s?(r.clientY-d.top)/C>.5:$>M}else S||(E=A!==t&&!N||z&&N);var B=J(o,f,t,l,s,d,r,E);!1!==B&&(1!==B&&-1!==B||(E=1===B),O=!0,I(Z,30),V(y,x),t.contains(f)||(E&&!A?f.appendChild(t):s.parentNode.insertBefore(t,E?A:s)),e=t.parentNode,this._animate(l,t),this._animate(d,s))}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),H(e,"transition","none"),H(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,H(e,"transition","all "+n+"ms"),H(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=I(function(){H(e,"transition",""),H(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;X(T,"touchmove",this._onTouchMove),X(T,"pointermove",this._onTouchMove),X(t,"mouseup",this._onDrop),X(t,"touchend",this._onDrop),X(t,"pointerup",this._onDrop),X(t,"touchcancel",this._onDrop),X(t,"pointercancel",this._onDrop),X(t,"selectstart",this)},_onDrop:function(r){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(x.pid),clearTimeout(this._dragStartTimer),st(this._cloneId),st(this._dragStartId),X(T,"mouseover",this),X(T,"mousemove",this._onTouchMove),this.nativeDraggable&&(X(T,"drop",this),X(s,"dragstart",this._onDragStart)),this._offUpEvents(),r&&(k&&(r.preventDefault(),!l.dropBubble&&r.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),o!==e&&"clone"===R.active.lastPullMode||i&&i.parentNode&&i.parentNode.removeChild(i),t&&(this.nativeDraggable&&X(t,"dragend",this),Q(t),t.style["will-change"]="",G(t,this.options.ghostClass,!1),G(t,this.options.chosenClass,!1),K(this,o,"unchoose",t,e,o,h),o!==e?(f=et(t,l.draggable))>=0&&(K(null,e,"add",t,e,o,h,f),K(this,o,"remove",t,e,o,h,f),K(null,e,"sort",t,e,o,h,f),K(this,o,"sort",t,e,o,h,f)):t.nextSibling!==a&&(f=et(t,l.draggable))>=0&&(K(this,o,"update",t,e,o,h,f),K(this,o,"sort",t,e,o,h,f)),R.active&&(null!=f&&-1!==f||(f=h),K(this,o,"end",t,e,o,h,f),this.save()))),this._nulling()},_nulling:function(){o=t=e=n=a=i=r=s=l=v=b=k=f=c=u=m=g=R.active=null,$.forEach(function(t){t.checked=!0}),$.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.preventDefault()}(e));break;case"mouseover":this._onDrop(e);break;case"selectstart":e.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)U(t=n[i],a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||tt(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,i){var o=n.children[i];U(o,this.options.draggable,n)&&(e[t]=o)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return U(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&j(n)},destroy:function(){var t=this.el;t[_]=null,X(t,"mousedown",this._onTapStart),X(t,"touchstart",this._onTapStart),X(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(t,"dragover",this),X(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),B.splice(B.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},Y(T,"touchmove",function(t){R.active&&t.preventDefault()}),R.utils={on:Y,off:X,css:H,find:q,is:function(t,e){return!!U(t,e,t)},extend:ot,throttle:it,closest:U,toggleClass:G,clone:at,index:et,nextTick:rt,cancelNextTick:st},R.create=function(t,e){return new R(t,e)},R.version="1.7.0",R})},MPRc:function(t,e,n){var i=n("6bnK");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("4e829929",i,!0)},SzTq:function(t,e,n){t.exports=n.p+"static/img/task-back.06e1ac5.png"},"YXf/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("kCe2"),o=n("woOf"),a=n.n(o),r=n("XlQU"),s=n("GLLG"),l=n("B0Lc"),d=n("DAYN"),c={name:"DragKanbanDemo",components:{draggable:n.n(d).a},props:{taskType:{type:String,default:""},headerText:{type:String,default:"Header"},options:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},proId:"",userId:"",taskInfo:{name:"",info:"",userId:"",users:{},designLink:{},finishTime:"",linkId:""},dialogStatus:"",textMap:{update:"修改任务",create:"新建任务"},newTaskDialog:!1,taskPicOptions:[],desiginLinkOptions:[],rules:{finishTime:[{required:!0,message:"请选择结束时间！",trigger:"change"}],users:[{required:!0,message:"请选择任务负责人！",trigger:"change"}]},getMaLoading:!0}},created:function(){this.proId=this.$route.query.id,this.userId=this.getCookie("userId")},methods:{resetCreat:function(){this.taskInfo={name:"",info:"",userId:"",finishTime:"",linkId:""}},handleAddTask:function(){var t=this;this.resetCreat(),this.dialogStatus="create",this.newTaskDialog=!0,this.$nextTick(function(){t.$refs.taskForm.clearValidate()})},getAbleUser:function(){var t=this;Object(r.d)().then(function(e){0===e.data.code?(t.taskPicOptions=[],e.data.data.forEach(function(e){"admin"!==e.username&&"securityGuard"!==e.username&&"securityAuditor"!==e.username&&(t.list.length>0?e.secretClass>=t.list[0].project.secretClass&&t.taskPicOptions.push(e):t.taskPicOptions.push(e))}),t.getMaLoading=!1):t.getMaLoading=!1}).catch(function(){t.getMaLoading=!1})},getAbleLinks:function(){var t=this;Object(l.b)().then(function(e){0===e.data.code&&(t.desiginLinkOptions=e.data.data)})},saveTask:function(){var t=this;this.$refs.taskForm.validate(function(e){if(!e)return!1;var i=n("mw3O"),o={finishTime:t.taskInfo.finishTime.toString(),userId:t.taskInfo.userId,designLinkId:t.taskInfo.linkId},a=i.stringify(o);Object(s.x)(t.proId,a).then(function(e){0===e.data.code?(t.$notify({title:"成功",message:"任务新建成功！",type:"success",duration:"2000"}),t.newTaskDialog=!1,t.$emit("onNewTask")):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:"2000"})})})},handleEditTask:function(t){var e=this;this.dialogStatus="update",this.taskInfo=a()({},t),null!==t.users&&(this.taskPicOptions=[t.users]),null!==t.designLink&&(this.desiginLinkOptions=[t.designLink]),this.newTaskDialog=!0,this.$nextTick(function(){e.$refs.taskForm.clearValidate()})},editTask:function(){var t=this;this.$refs.taskForm.validate(function(e){if(!e)return!1;var i=n("mw3O"),o={finishTime:t.taskInfo.finishTime.toString(),userId:t.taskInfo.users.id,loginUserId:t.userId},a=i.stringify(o);Object(s.z)(t.taskInfo.id,t.proId,a).then(function(e){0===e.data.code?(t.$notify({title:"成功",message:"任务修改成功！",type:"success",duration:"2000"}),t.newTaskDialog=!1,t.$emit("onNewTask")):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:"2000"})})})},handleDeleteTask:function(t){var e=this;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.f)(t.id).then(function(t){0===t.data.code?(e.$notify({title:"成功",message:"任务删除成功！",type:"success",duration:"2000"}),e.$emit("onNewTask")):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:"2000"})})}).catch(function(){})},handleSelectTask:function(t){0!==t.state?null!==t.users?(this.$router.push({path:"/taskFiles",name:"taskFiles",params:{id:t.id},query:{proClass:t.project.secretClass,name:t.name}}),this.setCookie("taskSelectedName",encodeURI(t.name)),this.setCookie("taskSelectedId",t.id),this.setCookie("taskSelectedClass",t.project.secretClass)):this.$notify({title:"失败",message:"请先指定子任务负责人！",type:"error",duration:"2000"}):this.$notify({title:"失败",message:"该子任务尚未开始！",type:"error",duration:"2000"})}},computed:{copmutedDate:function(){return function(t){var e=new Date(parseInt(t)),n=e.getFullYear(),i="0"+(e.getMonth()+1),o="0"+e.getDate();return n+"-"+i.substring(i.length-2,i.length)+"-"+o.substring(o.length-2,o.length)}}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board-column"},[n("div",{staticClass:"board-column-header"},[t._v("\n    "+t._s(t.headerText)+"\n  ")]),t._v(" "),n("div",{staticClass:"board-column-content",attrs:{list:t.list,options:t.options}},t._l(t.list,function(e){return n("div",{key:e.id,staticClass:"board-item",on:{dblclick:function(n){n.stopPropagation(),t.handleSelectTask(e)}}},[n("span",{staticClass:"tag-box"}),t._v(" "),n("span",{on:{click:function(n){t.handleEditTask(e)}}},[n("span",{staticClass:"link-type"},[t._v(t._s(e.name))])]),t._v(" "),e.finishTime?n("div",{staticClass:"tag-box-mine"},[n("span",{staticClass:"status-box"},[t._v("\n          "+t._s(t.copmutedDate(e.finishTime))+"\n        ")]),t._v(" "),e.users?n("span",{staticClass:"link-type taskPic"},[n("svg-icon",{attrs:{"icon-class":"people"}}),t._v(t._s(e.users.realName)+"\n        ")],1):t._e()]):t._e()])})),t._v(" "),n("el-dialog",{staticClass:"limit-width-dialog",attrs:{title:t.textMap[t.dialogStatus],visible:t.newTaskDialog,"append-to-body":"",width:"60%"},on:{"update:visible":function(e){t.newTaskDialog=e}}},[n("div",{staticClass:"img-container"}),t._v(" "),n("div",{staticClass:"text-container"},[t._v("设置当前子任务")]),t._v(" "),n("el-form",{ref:"taskForm",attrs:{"label-position":"right","label-width":"120px",rules:t.rules,model:t.taskInfo}},[n("el-form-item",{attrs:{label:"任务名",prop:"name"}},[n("label",{attrs:{slot:"label"},slot:"label"},[n("svg-icon",{attrs:{"icon-class":"documentation"}}),t._v("\n          任务名\n        ")],1),t._v(" "),n("el-input",{attrs:{disabled:"disabled"},model:{value:t.taskInfo.name,callback:function(e){t.$set(t.taskInfo,"name",e)},expression:"taskInfo.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("table.projectDesc"),prop:"users"}},[n("label",{attrs:{slot:"label"},slot:"label"},[n("svg-icon",{attrs:{"icon-class":"people"}}),t._v("\n          执行者\n        ")],1),t._v(" "),n("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",loading:t.getMaLoading,placeholder:"请选择"},on:{focus:t.getAbleUser},model:{value:t.taskInfo.users,callback:function(e){t.$set(t.taskInfo,"users",e)},expression:"taskInfo.users"}},t._l(t.taskPicOptions,function(t){return n("el-option",{key:t.id,attrs:{label:t.realName,value:t}})}))],1),t._v(" "),n("el-form-item",{attrs:{required:"",prop:"finishTime"}},[n("label",{attrs:{slot:"label"},slot:"label"},[n("svg-icon",{attrs:{"icon-class":"calendar"}}),t._v("\n          截止日期\n        ")],1),t._v(" "),n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"设置截止日期",format:"yyyy 年 MM 月 dd 日","picker-options":t.pickerOptions,"value-format":"timestamp"},model:{value:t.taskInfo.finishTime,callback:function(e){t.$set(t.taskInfo,"finishTime",e)},expression:"taskInfo.finishTime"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["create"===t.dialogStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.saveTask}},[t._v("确定")]):t._e(),t._v(" "),"update"===t.dialogStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.editTask}},[t._v("确定")]):t._e()],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")(c,u,!1,function(t){n("MPRc")},"data-v-6f731504",null).exports,h=n("nhhP"),f=n("EMlb"),g={name:"task_manage",components:{PanThumb:i.a,Kanban:p,visio:h.default},data:function(){return{undo:"undo",userId:"",roles:"",proId:"",proName:"",userName:"",selectedId:"",tableKey:0,list:[],processNodeList:[],taskInfo:{name:"",info:""},searchQuery:"",formLabelWidth:"100px",textMap:{update:"编辑",create:"新建"},token:"",role:"",options:{group:"mission"},temp:{name:"",pic:"",finishTime:"",designLink:null},listLoading:!1,templateDialog:!1,editable:!1,completeFlag:!1,proInfo:{},startAble:!1}},created:function(){this.completeFlag=!1,this.roles=this.$store.getters.roles,this.proId=this.$route.query.id,this.proName=this.$route.query.name,this.getProDetail(),this.getLinkList(),this.getProcessList()},methods:{getProDetail:function(){var t=this;Object(f.f)(this.proId).then(function(e){0===e.data.code&&(t.proInfo=e.data.data,0===t.proInfo.state&&t.proInfo.pic.id===t.getCookie("userId")?t.startAble=!0:t.startAble=!1,e.data.data.pic.id===t.getCookie("userId")&&(t.editable=!0))})},getLinkList:function(){var t=this;this.listLoading=!0,Object(s.l)(this.proId).then(function(e){0===e.data.code&&(t.list=e.data.data),t.listLoading=!1}).catch(function(){t.listLoading=!1})},hideVisioDialog:function(){this.templateDialog=!1},refreshVisio:function(){this.getLinkList(),this.getProcessList()},getProcessList:function(){var t=this;this.completeFlag=!1,Object(s.m)(this.proId).then(function(e){0===e.data.code&&(t.processNodeList=e.data.data,t.completeFlag=!0)})},logout:function(){this.$store.dispatch("FedLogOut").then(function(){location.reload()})},refreshList:function(){this.getLinkList()},handleSelectTemplate:function(){this.templateDialog=!0,this.editable=!0},handleCheckTemplate:function(){this.templateDialog=!0,this.editable=!1},handleBackToPro:function(){this.$router.push({path:"/projectManage"})},handleStartPro:function(){var t=this;Object(f.o)(this.proId).then(function(e){0===e.data.code?(t.$notify({title:"成功",message:"项目启动成功",type:"success",duration:2e3}),t.startAble=!1,t.getProDetail(),t.getLinkList(),t.getProcessList()):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})})}},computed:{listUndo:function(){return this.list.filter(function(t){return 0===t.state})},listWorking:function(){return this.list.filter(function(t){return t.state>0&&!1===t.ifApprove})},listDone:function(){return this.list.filter(function(t){return!0===t.ifApprove})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"tasks-container"},[n("div",{staticStyle:{padding:"10px 0 0 40px"}},[n("span",[t.roles.includes("ROLE_PROJECT_MANAGER")||!0===t.editable?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.handleSelectTemplate}},[t._v("选择模版")]):n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.handleCheckTemplate}},[t._v("查看流程")]),t._v(" "),t.startAble?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleStartPro}},[t._v("启动项目")]):t._e()],1)]),t._v(" "),n("div",{staticClass:"board"},[n("Kanban",{key:1,staticClass:"kanban todo",attrs:{list:t.listUndo,options:t.options,taskType:t.undo,"header-text":"待处理"},on:{onNewTask:t.refreshList}}),t._v(" "),n("Kanban",{key:2,staticClass:"kanban working",attrs:{list:t.listWorking,options:t.options,"header-text":"进行中"},on:{onNewTask:t.refreshList}}),t._v(" "),n("Kanban",{key:3,staticClass:"kanban done",attrs:{list:t.listDone,options:t.options,"header-text":"已完成"},on:{onNewTask:t.refreshList}})],1),t._v(" "),n("el-dialog",{staticClass:"visio-dialog",attrs:{visible:t.templateDialog,width:"80%"},on:{"update:visible":function(e){t.templateDialog=e}}},[t.templateDialog&&t.completeFlag?n("visio",{attrs:{proId:t.proId,processNodes:t.processNodeList,editable:t.editable},on:{refreshList:t.refreshVisio,hideVisio:t.hideVisioDialog}}):t._e()],1)],1)},staticRenderFns:[]};var v=n("VU/8")(g,m,!1,function(t){n("fQsm")},"data-v-73dc5325",null);e.default=v.exports},fQsm:function(t,e,n){var i=n("43Ol");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("b3c47e3e",i,!0)},nhhP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),a=n("pFYg"),r=n.n(a),s=n("GLLG"),l={name:"visio",props:{proId:{type:String,default:""},processNodes:{type:Array,default:[]},editable:{type:Boolean,default:!1}},data:function(){return{myDiagram:null,originValue:{class:"go.GraphLinksModel",linkFromPortIdProperty:"fromPort",linkToPortIdProperty:"toPort",nodeDataArray:[{figure:"subtask",key:-1,loc:"-60 130",size:"150 70",text:"结构体建模"},{figure:"subtask",key:-2,loc:"-60 440",size:"150 70",text:"装配仿真"},{figure:"subtask",key:-3,loc:"-60 240",size:"150 70",text:"结构仿真"},{figure:"subtask",key:-4,loc:"-60 340",size:"150 70",text:"力学仿真"},{figure:"subtask",key:-5,loc:"-60 540",size:"150 70",text:"电路仿真"}],linkDataArray:[{from:-1,to:-3,fromPort:"B",toPort:"T",points:[]},{from:-3,to:-4,fromPort:"B",toPort:"T",points:[]},{from:-4,to:-2,fromPort:"B",toPort:"T",points:[]},{from:-2,to:-5,fromPort:"B",toPort:"T",points:[]}]},originLink:[],processNodeList:[]}},methods:{init:function(){var t=this.go,e=t.GraphObject.make;function n(n,i,o,a){return e(t.Shape,"Circle",{fill:null,stroke:null,desiredSize:new t.Size(7,7),alignment:i,alignmentFocus:i,portId:n,fromSpot:i,toSpot:i,fromLinkable:o,toLinkable:a,cursor:"pointer"})}this.myDiagram=e(t.Diagram,"myDiagramDiv",{isReadOnly:!this.editable,grid:e(t.Panel,"Grid",e(t.Shape,"LineH",{stroke:"lightgray",strokeWidth:.5}),e(t.Shape,"LineH",{stroke:"gray",strokeWidth:.5,interval:10}),e(t.Shape,"LineV",{stroke:"lightgray",strokeWidth:.5}),e(t.Shape,"LineV",{stroke:"gray",strokeWidth:.5,interval:10})),InitialLayoutCompleted:function(t){t.diagram.nodes.each(function(t){!0===t.data.pass&&(t.deletable=!1,t.textEditable=!1)}),t.diagram.links.each(function(t){!0===t.data.pass&&(t.deletable=!1,t.textEditable=!1)})},"draggingTool.dragsLink":!0,"draggingTool.isGridSnapEnabled":!0,"linkingTool.portGravity":20,"relinkingTool.isUnconnectedLinkValid":!0,"relinkingTool.portGravity":20,"relinkingTool.fromHandleArchetype":e(t.Shape,"Diamond",{segmentIndex:0,cursor:"pointer",desiredSize:new t.Size(8,8),fill:"tomato",stroke:"darkred"}),"relinkingTool.toHandleArchetype":e(t.Shape,"Diamond",{segmentIndex:-1,cursor:"pointer",desiredSize:new t.Size(8,8),fill:"darkred",stroke:"tomato"}),"linkReshapingTool.handleArchetype":e(t.Shape,"Diamond",{desiredSize:new t.Size(7,7),fill:"lightblue",stroke:"deepskyblue"}),"rotatingTool.handleAngle":270,"rotatingTool.handleDistance":30,"rotatingTool.snapAngleMultiple":15,"rotatingTool.snapAngleEpsilon":15,"undoManager.isEnabled":!0});var i=e(t.Adornment,"Auto",e(t.Shape,{fill:null,stroke:"deepskyblue",strokeWidth:1.5,strokeDashArray:[4,2]}),e(t.Placeholder)),o=e(t.Adornment,"Spot",{locationSpot:t.Spot.Right},e(t.Placeholder),e(t.Shape,{alignment:t.Spot.TopLeft,cursor:"nw-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.Top,cursor:"n-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.TopRight,cursor:"ne-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.Left,cursor:"w-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.Right,cursor:"e-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.BottomLeft,cursor:"se-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.Bottom,cursor:"s-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{alignment:t.Spot.BottomRight,cursor:"sw-resize",desiredSize:new t.Size(6,6),fill:"lightblue",stroke:"deepskyblue"})),a=e(t.Adornment,{locationSpot:t.Spot.Center,locationObjectName:"CIRCLE"},e(t.Shape,"Circle",{name:"CIRCLE",cursor:"pointer",desiredSize:new t.Size(7,7),fill:"lightblue",stroke:"deepskyblue"}),e(t.Shape,{geometryString:"M3.5 7 L3.5 30",isGeometryPositioned:!0,stroke:"deepskyblue",strokeWidth:1.5,strokeDashArray:[4,2]}));function r(t,e){t.ports.each(function(t){""!==t.portId&&(t.fill=e?"rgba(0,0,0,.3)":null)})}this.myDiagram.nodeTemplate=e(t.Node,"Spot",{locationSpot:t.Spot.Center},new t.Binding("location","loc",t.Point.parse).makeTwoWay(t.Point.stringify),{selectable:!0,selectionAdornmentTemplate:i},{resizable:!0,resizeObjectName:"PANEL",resizeAdornmentTemplate:o},{rotatable:!0,rotateAdornmentTemplate:a},new t.Binding("angle").makeTwoWay(),e(t.Panel,"Auto",{name:"PANEL"},new t.Binding("desiredSize","size",t.Size.parse).makeTwoWay(t.Size.stringify),e(t.Shape,"Rectangle",{portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer",fill:"white",strokeWidth:2},new t.Binding("figure"),new t.Binding("fill")),e(t.TextBlock,{font:"bold 11pt Helvetica, Arial, sans-serif",margin:8,maxSize:new t.Size(160,NaN),wrap:t.TextBlock.WrapFit,editable:!0},new t.Binding("text").makeTwoWay())),n("T",t.Spot.Top,!1,!0),n("L",t.Spot.Left,!0,!0),n("R",t.Spot.Right,!0,!0),n("B",t.Spot.Bottom,!0,!1),{mouseEnter:function(t,e){r(e,!0)},mouseLeave:function(t,e){r(e,!1)}});var s=e(t.Adornment,"Link",e(t.Shape,{isPanelMain:!0,fill:null,stroke:"deepskyblue",strokeWidth:0}));this.myDiagram.linkTemplate=e(t.Link,{selectable:!0,selectionAdornmentTemplate:s},{relinkableFrom:!0,relinkableTo:!0,reshapable:!0},{routing:t.Link.AvoidsNodes,curve:t.Link.JumpOver,corner:0,toShortLength:4},new t.Binding("points").makeTwoWay(),e(t.Shape,{isPanelMain:!0,strokeWidth:2}),e(t.Shape,{toArrow:"Standard",stroke:null}),e(t.Panel,"Auto",new t.Binding("visible","isSelected").ofObject(),e(t.Shape,"RoundedRectangle",{fill:"#F8F8F8",stroke:null}),e(t.TextBlock,{textAlign:"center",font:"10pt helvetica, arial, sans-serif",stroke:"#919191",margin:2,minSize:new t.Size(10,NaN),editable:!0},new t.Binding("text").makeTwoWay())));e(t.Palette,"myPaletteDiv",{maxSelectionCount:1,nodeTemplateMap:this.myDiagram.nodeTemplateMap,linkTemplate:e(t.Link,{locationSpot:t.Spot.Center,selectionAdornmentTemplate:e(t.Adornment,"Link",{locationSpot:t.Spot.Center},e(t.Shape,{isPanelMain:!0,fill:null,stroke:"deepskyblue",strokeWidth:0}),e(t.Shape,{toArrow:"Standard",stroke:null}))},{routing:t.Link.AvoidsNodes,curve:t.Link.JumpOver,corner:5,toShortLength:4},new t.Binding("points"),e(t.Shape,{isPanelMain:!0,strokeWidth:2}),e(t.Shape,{toArrow:"Standard",stroke:null})),model:new t.GraphLinksModel([{text:"结构体建模",size:"100 50",figure:"subtask"},{text:"电路建模",size:"100 50",figure:"subtask"},{text:"装配仿真",size:"100 50",figure:"subtask"},{text:"结构仿真",size:"100 50",figure:"subtask"},{text:"电路仿真",size:"100 50",figure:"subtask"},{text:"力学仿真",size:"100 50",figure:"subtask"},{text:"热学仿真",size:"100 50",figure:"subtask"},{text:"热仿真",size:"100 50",figure:"subtask"},{text:"电磁仿真",size:"100 50",figure:"subtask"},{text:"???",figure:"Diamond",fill:"lightskyblue"}])})},saveMyDiagram:function(){console.log(this.myDiagram.model.Gc),console.log(this.myDiagram.model.Pc)},undoMyDiagram:function(){this.myDiagram.commandHandler.undo()},redoMyDiagram:function(){this.myDiagram.commandHandler.redo()},getProcessList:function(){var t=this;Object(s.m)(this.proId).then(function(e){0===e.data.code&&(t.processNodeList=e.data.data)})},createFromTemp:function(){var t=this,e=[],n=[],i=this.myDiagram.model.Gc,a=this.myDiagram.model.Pc;if(i.length<2||a.length<1)this.$notify({title:"提示",message:"当前流程不完整，请检查！",type:"error",duration:2e3});else if(-1!=i.findIndex(function(t){return t.text.indexOf("建模")>=0})&&-1!=i.findIndex(function(t){return t.text.indexOf("仿真")>=0})){for(var l=0;l<a.length;l++){if(null==a[l].from||null==a[l].to)return void this.$notify({title:"提示",message:"流程未闭合",type:"error",duration:2e3});for(var d=0;d<a.length;d++)if(l!==d&&(a[l].to===a[d].from&&a[l].from===a[d].to||a[l].to===a[d].to&&a[l].from===a[d].from))return void this.$notify({title:"提示",message:"节点间引用错误，请检查！",type:"error",duration:2e3})}for(var c=function(n){if(-1==a.findIndex(function(t){return t.to==i[n].key})&&"建模"!==i[n].text.substring(i[n].text.length-2))return t.$notify({title:"提示",message:"起点必须为建模！",type:"error",duration:2e3}),{v:void 0};var o={nodeName:i[n].text,location:i[n].loc,selfSign:i[n].key,figure:i[n].figure?i[n].figure:"NULL",nodeSize:i[n].size?i[n].size:"150 70",id:i[n].id?i[n].id:null};e.push(o)},u=0;u<i.length;u++){var p=c(u);if("object"===(void 0===p?"undefined":r()(p)))return p.v}var h=o()(e);Object(s.d)(this.proId,h).then(function(e){if(0===e.data.code){for(var i=e.data.data,r=function(t){var e=i.find(function(e){return e.selfSign==a[t].from}).id,o=i.find(function(e){return e.selfSign==a[t].to}).id,r={parentId:e||null,fromPort:""==a[t].fromPort?"B":a[t].fromPort,toPort:""==a[t].toPort?"T":a[t].toPort,selfId:o||null};n.push(r)},l=0;l<a.length;l++)r(l);var d=o()(n);Object(s.c)(t.proId,d).then(function(e){0===e.data.code&&(t.$emit("refreshList"),t.$emit("hideVisio"))})}}).catch(function(){t.$notify({title:"失败",message:"操作失败",type:"error",duration:2e3}),t.$emit("hideVisio")})}else this.$notify({title:"提示",message:"必须至少包含一个建模和仿真流程",type:"error",duration:2e3})}},mounted:function(){var t=this;0===this.processNodes.length?(this.init(),this.myDiagram.model=this.go.Model.fromJson(this.originValue),this.originLink=this.originValue.linkDataArray.slice()):function(){for(var e=[],n=[],i=function(i){var o={id:t.processNodes[i].id,figure:t.processNodes[i].figure,key:t.processNodes[i].selfSign,loc:t.processNodes[i].location,size:t.processNodes[i].nodeSize,text:t.processNodes[i].nodeName,subtask:t.processNodes[i].subtask};!0===t.processNodes[i].subtask.ifApprove&&(o.pass=!0,o.fill="#2ac06d",o.ifAllowTo=!1),!1===t.processNodes[i].subtask.ifApprove&&t.processNodes[i].subtask.state>0&&(o.fill="#f9944a"),e.push(o),null!==t.processNodes[i].linkList&&t.processNodes[i].linkList.forEach(function(e){if(void 0!==t.processNodes.find(function(t){return t.id==e.parentId})){var o={from:t.processNodes.find(function(t){return t.id==e.parentId}).selfSign,to:t.processNodes[i].selfSign,fromPort:e.fromPort,toPort:e.toPort};n.push(o)}})},o=0;o<t.processNodes.length;o++)i(o);t.originValue.nodeDataArray=e.slice(),t.originValue.linkDataArray=n.slice(),t.originLink=n.slice(),t.init(),t.myDiagram.model=t.go.Model.fromJson(t.originValue)}()},destroyed:function(){console.log("destroyed")}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"},attrs:{id:"sample"}},[t.editable?n("div",{staticClass:"operationBar",staticStyle:{"margin-bottom":"10px"}},[n("span",{staticClass:"operation-btn",on:{click:t.saveMyDiagram}},[t._v("保存")]),t._v(" "),n("span",{staticClass:"operation-btn",on:{click:t.undoMyDiagram}},[t._v("撤销")]),t._v(" "),n("span",{staticClass:"operation-btn",on:{click:t.redoMyDiagram}},[t._v("恢复")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.createFromTemp}},[t._v("保存")])],1):t._e(),t._v(" "),n("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between",height:"calc(100% - 40px)"}},[n("div",{class:{hide:!1===t.editable},staticStyle:{width:"200px","margin-right":"2px","background-color":"whitesmoke",border:"solid 1px black"},attrs:{id:"myPaletteDiv"}}),t._v(" "),n("div",{staticStyle:{"flex-grow":"1",height:"100%",border:"solid 1px black"},attrs:{id:"myDiagramDiv"}})]),t._v(" "),n("div",{attrs:{id:"myOverviewDIV"}})])},staticRenderFns:[]};var c=n("VU/8")(l,d,!1,function(t){n("1dE+")},"data-v-af0c023a",null);e.default=c.exports}});